<!DOCTYPE html>

<script>
    window.zeoParamsCallbackCalled = false;
    // fail-safe after 2 seconds
    setTimeout(function () {
        window.zeoParamsCallback({}); // Add default details if needed.
    }, 2000);

    window.zeoParamsCallback = function (targetingParameters) {
        if (window.zeoParamsCallbackCalled) {
            // callback already called
            return;
        }
        window.zeoParamsCallbackCalled = true;
        //put your consuming platform's code here
        window.kameleoonQueue = window.kameleoonQueue || [];
        for (var key in targetingParameters) {
            if (targetingParameters[key]!== null && targetingParameters[key] !== undefined) {
                window.kameleoonQueue.push(['Kameleoon.API.Data.setCustomData', key, targetingParameters[key]]);
            }
        }

    };
</script>
 

<header>
    <script type="text/javascript">!function(e,t){var n=t.createElement("script");n.type="text/javascript",n.crossorigin="anonymous",n.async=!0,n.src="https://content.zeotap.com/sdk/zeotap.min.js",n.onload=function(){};var s=t.getElementsByTagName("script")[0];s.parentNode.insertBefore(n,s);function o(e,t,n){function s(t){e[t]=function(){e[n].push([t].concat(Array.prototype.slice.call(arguments,0)))}}for(var o=0;o<t.length;o++)s(t[o])}var r=e.zeotap||{_q:[],_qcmp:[]};o(r,["init","setEventProperties","setUserProperties","setPageProperties","setMetaProperties","setUserIdentities","unsetUserIdentites","setZI"],"_q"),o(r,["setConsent","addAskForConsentActionListener"],"_qcmp"),e.zeotap=r}(window,document);</script><script type="text/javascript">window.zeotap.init("564779d3-23f9-43d1-8b80-fa5bef1f4d43",{enableLogging:true, loadInteractScript:true});</script> 
    
    
</header>
<body>
    <div> Hello World </div>

    <script>
        (function() {
            window.kameleoonQueue = window.kameleoonQueue || [];
            const originalPush = window.kameleoonQueue.push;
            if (Array.isArray(window.kameleoonQueue)) {
                console.log('kameleoonQueue is an array');
                window.kameleoonQueue.forEach(args => {
                    const logElement = document.createElement('div');
                    logElement.textContent = 'kameleoonQueue existing value: ' + JSON.stringify(args);
                    document.body.appendChild(logElement);
                });
            }
            window.kameleoonQueue.push = function(...args) {
                const logElement = document.createElement('div');
                logElement.textContent = 'kameleoonQueue updated: ' + JSON.stringify(args);
                document.body.appendChild(logElement);
                return originalPush.apply(this, args);
            };
        })();
    </script>
</body>
<html>