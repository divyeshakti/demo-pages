var analyticsjs=function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e,t){return e(t={exports:{}},t.exports),t.exports}var o=n((function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)})),i=n((function(e){var t=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=t)})),r=(i.version,function(e,t,n){if(function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!")}(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,o){return e.call(t,n,o)};case 3:return function(n,o,i){return e.call(t,n,o,i)}}return function(){return e.apply(t,arguments)}}),s=function(e){return"object"==typeof e?null!==e:"function"==typeof e},a=function(e){if(!s(e))throw TypeError(e+" is not an object!");return e},c=function(e){try{return!!e()}catch(e){return!0}},l=!c((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),u=o.document,p=s(u)&&s(u.createElement),d=function(e){return p?u.createElement(e):{}},h=!l&&!c((function(){return 7!=Object.defineProperty(d("div"),"a",{get:function(){return 7}}).a})),f=function(e,t){if(!s(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!s(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!s(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!s(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")},g=Object.defineProperty,v={f:l?Object.defineProperty:function(e,t,n){if(a(e),t=f(t,!0),a(n),h)try{return g(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},y=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},S=l?function(e,t,n){return v.f(e,t,y(1,n))}:function(e,t,n){return e[t]=n,e},m={}.hasOwnProperty,_=function(e,t){return m.call(e,t)},I=function(e,t,n){var s,a,c,l=e&I.F,u=e&I.G,p=e&I.S,d=e&I.P,h=e&I.B,f=e&I.W,g=u?i:i[t]||(i[t]={}),v=g.prototype,y=u?o:p?o[t]:(o[t]||{}).prototype;for(s in u&&(n=t),n)(a=!l&&y&&void 0!==y[s])&&_(g,s)||(c=a?y[s]:n[s],g[s]=u&&"function"!=typeof y[s]?n[s]:h&&a?r(c,o):f&&y[s]==c?function(e){var t=function(t,n,o){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,o)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(c):d&&"function"==typeof c?r(Function.call,c):c,d&&((g.virtual||(g.virtual={}))[s]=c,e&I.R&&v&&!v[s]&&S(v,s,c)))};I.F=1,I.G=2,I.S=4,I.P=8,I.B=16,I.W=32,I.U=64,I.R=128;var w=I;w(w.S+w.F*!l,"Object",{defineProperty:v.f});var C=i.Object,b=function(e,t,n){return C.defineProperty(e,t,n)},k=0,x=Math.random(),O=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++k+x).toString(36))},E=n((function(e){var t=O("meta"),n=v.f,o=0,i=Object.isExtensible||function(){return!0},r=!c((function(){return i(Object.preventExtensions({}))})),a=function(e){n(e,t,{value:{i:"O"+ ++o,w:{}}})},l=e.exports={KEY:t,NEED:!1,fastKey:function(e,n){if(!s(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!_(e,t)){if(!i(e))return"F";if(!n)return"E";a(e)}return e[t].i},getWeak:function(e,n){if(!_(e,t)){if(!i(e))return!0;if(!n)return!1;a(e)}return e[t].w},onFreeze:function(e){return r&&l.NEED&&i(e)&&!_(e,t)&&a(e),e}}})),P=(E.KEY,E.NEED,E.fastKey,E.getWeak,E.onFreeze,function(e,t){var n=(i.Object||{})[e]||Object[e],o={};o[e]=t(n),w(w.S+w.F*c((function(){n(1)})),"Object",o)}),A=E.onFreeze;P("seal",(function(e){return function(t){return e&&s(t)?e(A(t)):t}}));var D,T=i.Object.seal,F=n((function(t){var n,o;n=e,o=function(){var e=function(){},t="undefined"!=typeof window&&void 0!==window.navigator&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"];function o(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function i(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function r(n){return"debug"===n&&(n="log"),"undefined"!=typeof console&&("trace"===n&&t?i:void 0!==console[n]?o(console,n):void 0!==console.log?o(console,"log"):e)}function s(t,o){for(var i=0;i<n.length;i++){var r=n[i];this[r]=i<t?e:this.methodFactory(r,t,o)}this.log=this.debug}function a(e,t,n){return function(){"undefined"!=typeof console&&(s.call(this,t,n),this[e].apply(this,arguments))}}function c(e,t,n){return r(e)||a.apply(this,arguments)}function l(e,t,o){var i,r=this,a="loglevel";function l(){var e;if("undefined"!=typeof window&&a){try{e=window.localStorage[a]}catch(e){}if(void 0===e)try{var t=window.document.cookie,n=t.indexOf(encodeURIComponent(a)+"=");-1!==n&&(e=/^([^;]+)/.exec(t.slice(n))[1])}catch(e){}return void 0===r.levels[e]&&(e=void 0),e}}"string"==typeof e?a+=":"+e:"symbol"==typeof e&&(a=void 0),r.name=e,r.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},r.methodFactory=o||c,r.getLevel=function(){return i},r.setLevel=function(t,o){if("string"==typeof t&&void 0!==r.levels[t.toUpperCase()]&&(t=r.levels[t.toUpperCase()]),!("number"==typeof t&&t>=0&&t<=r.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;if(i=t,!1!==o&&function(e){var t=(n[e]||"silent").toUpperCase();if("undefined"!=typeof window&&a){try{return void(window.localStorage[a]=t)}catch(e){}try{window.document.cookie=encodeURIComponent(a)+"="+t+";"}catch(e){}}}(t),s.call(r,t,e),"undefined"==typeof console&&t<r.levels.SILENT)return"No console available for logging"},r.setDefaultLevel=function(e){l()||r.setLevel(e,!1)},r.enableAll=function(e){r.setLevel(r.levels.TRACE,e)},r.disableAll=function(e){r.setLevel(r.levels.SILENT,e)};var u=l();null==u&&(u=null==t?"WARN":t),r.setLevel(u,!1)}var u=new l,p={};u.getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=p[e];return t||(t=p[e]=new l(e,u.getLevel(),u.methodFactory)),t};var d="undefined"!=typeof window?window.log:void 0;return u.noConflict=function(){return"undefined"!=typeof window&&window.log===u&&(window.log=d),u},u.getLoggers=function(){return p},u.default=u,u},t.exports?t.exports=o():n.log=o()})),j=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},U=function(e){return Object(j(e))},L={}.toString,M=function(e){return L.call(e).slice(8,-1)},R=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==M(e)?e.split(""):Object(e)},z=function(e){return R(j(e))},N=Math.ceil,B=Math.floor,G=function(e){return isNaN(e=+e)?0:(e>0?B:N)(e)},H=Math.min,Z=function(e){return e>0?H(G(e),9007199254740991):0},q=Math.max,K=Math.min,V=n((function(e){var t=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(e.exports=function(e,n){return t[e]||(t[e]=void 0!==n?n:{})})("versions",[]).push({version:i.version,mode:"pure",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})})),Q=V("keys"),W=function(e){return Q[e]||(Q[e]=O(e))},J=(D=!1,function(e,t,n){var o,i=z(e),r=Z(i.length),s=function(e,t){return(e=G(e))<0?q(e+t,0):K(e,t)}(n,r);if(D&&t!=t){for(;r>s;)if((o=i[s++])!=o)return!0}else for(;r>s;s++)if((D||s in i)&&i[s]===t)return D||s||0;return!D&&-1}),$=W("IE_PROTO"),Y=function(e,t){var n,o=z(e),i=0,r=[];for(n in o)n!=$&&_(o,n)&&r.push(n);for(;t.length>i;)_(o,n=t[i++])&&(~J(r,n)||r.push(n));return r},X="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),ee=Object.keys||function(e){return Y(e,X)};P("keys",(function(){return function(e){return ee(U(e))}}));var te=i.Object.keys,ne=S,oe=n((function(e){var t=V("wks"),n=o.Symbol,i="function"==typeof n;(e.exports=function(e){return t[e]||(t[e]=i&&n[e]||(i?n:O)("Symbol."+e))}).store=t})),ie=v.f,re=oe("toStringTag"),se=function(e,t,n){e&&!_(e=n?e:e.prototype,re)&&ie(e,re,{configurable:!0,value:t})},ae={f:oe},ce=v.f,le=function(e){var t=i.Symbol||(i.Symbol={});"_"==e.charAt(0)||e in t||ce(t,e,{value:ae.f(e)})},ue={f:Object.getOwnPropertySymbols},pe={f:{}.propertyIsEnumerable},de=Array.isArray||function(e){return"Array"==M(e)},he=l?Object.defineProperties:function(e,t){a(e);for(var n,o=ee(t),i=o.length,r=0;i>r;)v.f(e,n=o[r++],t[n]);return e},fe=o.document,ge=fe&&fe.documentElement,ve=W("IE_PROTO"),ye=function(){},Se=function(){var e,t=d("iframe"),n=X.length;for(t.style.display="none",ge.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),Se=e.F;n--;)delete Se.prototype[X[n]];return Se()},me=Object.create||function(e,t){var n;return null!==e?(ye.prototype=a(e),n=new ye,ye.prototype=null,n[ve]=e):n=Se(),void 0===t?n:he(n,t)},_e=X.concat("length","prototype"),Ie={f:Object.getOwnPropertyNames||function(e){return Y(e,_e)}},we=Ie.f,Ce={}.toString,be="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ke={f:function(e){return be&&"[object Window]"==Ce.call(e)?function(e){try{return we(e)}catch(e){return be.slice()}}(e):we(z(e))}},xe=Object.getOwnPropertyDescriptor,Oe={f:l?xe:function(e,t){if(e=z(e),t=f(t,!0),h)try{return xe(e,t)}catch(e){}if(_(e,t))return y(!pe.f.call(e,t),e[t])}},Ee=E.KEY,Pe=Oe.f,Ae=v.f,De=ke.f,Te=o.Symbol,Fe=o.JSON,je=Fe&&Fe.stringify,Ue=oe("_hidden"),Le=oe("toPrimitive"),Me={}.propertyIsEnumerable,Re=V("symbol-registry"),ze=V("symbols"),Ne=V("op-symbols"),Be=Object.prototype,Ge="function"==typeof Te&&!!ue.f,He=o.QObject,Ze=!He||!He.prototype||!He.prototype.findChild,qe=l&&c((function(){return 7!=me(Ae({},"a",{get:function(){return Ae(this,"a",{value:7}).a}})).a}))?function(e,t,n){var o=Pe(Be,t);o&&delete Be[t],Ae(e,t,n),o&&e!==Be&&Ae(Be,t,o)}:Ae,Ke=function(e){var t=ze[e]=me(Te.prototype);return t._k=e,t},Ve=Ge&&"symbol"==typeof Te.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof Te},Qe=function(e,t,n){return e===Be&&Qe(Ne,t,n),a(e),t=f(t,!0),a(n),_(ze,t)?(n.enumerable?(_(e,Ue)&&e[Ue][t]&&(e[Ue][t]=!1),n=me(n,{enumerable:y(0,!1)})):(_(e,Ue)||Ae(e,Ue,y(1,{})),e[Ue][t]=!0),qe(e,t,n)):Ae(e,t,n)},We=function(e,t){a(e);for(var n,o=function(e){var t=ee(e),n=ue.f;if(n)for(var o,i=n(e),r=pe.f,s=0;i.length>s;)r.call(e,o=i[s++])&&t.push(o);return t}(t=z(t)),i=0,r=o.length;r>i;)Qe(e,n=o[i++],t[n]);return e},Je=function(e){var t=Me.call(this,e=f(e,!0));return!(this===Be&&_(ze,e)&&!_(Ne,e))&&(!(t||!_(this,e)||!_(ze,e)||_(this,Ue)&&this[Ue][e])||t)},$e=function(e,t){if(e=z(e),t=f(t,!0),e!==Be||!_(ze,t)||_(Ne,t)){var n=Pe(e,t);return!n||!_(ze,t)||_(e,Ue)&&e[Ue][t]||(n.enumerable=!0),n}},Ye=function(e){for(var t,n=De(z(e)),o=[],i=0;n.length>i;)_(ze,t=n[i++])||t==Ue||t==Ee||o.push(t);return o},Xe=function(e){for(var t,n=e===Be,o=De(n?Ne:z(e)),i=[],r=0;o.length>r;)!_(ze,t=o[r++])||n&&!_(Be,t)||i.push(ze[t]);return i};Ge||(ne((Te=function(){if(this instanceof Te)throw TypeError("Symbol is not a constructor!");var e=O(arguments.length>0?arguments[0]:void 0),t=function(n){this===Be&&t.call(Ne,n),_(this,Ue)&&_(this[Ue],e)&&(this[Ue][e]=!1),qe(this,e,y(1,n))};return l&&Ze&&qe(Be,e,{configurable:!0,set:t}),Ke(e)}).prototype,"toString",(function(){return this._k})),Oe.f=$e,v.f=Qe,Ie.f=ke.f=Ye,pe.f=Je,ue.f=Xe,ae.f=function(e){return Ke(oe(e))}),w(w.G+w.W+w.F*!Ge,{Symbol:Te});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;et.length>tt;)oe(et[tt++]);for(var nt=ee(oe.store),ot=0;nt.length>ot;)le(nt[ot++]);w(w.S+w.F*!Ge,"Symbol",{for:function(e){return _(Re,e+="")?Re[e]:Re[e]=Te(e)},keyFor:function(e){if(!Ve(e))throw TypeError(e+" is not a symbol!");for(var t in Re)if(Re[t]===e)return t},useSetter:function(){Ze=!0},useSimple:function(){Ze=!1}}),w(w.S+w.F*!Ge,"Object",{create:function(e,t){return void 0===t?me(e):We(me(e),t)},defineProperty:Qe,defineProperties:We,getOwnPropertyDescriptor:$e,getOwnPropertyNames:Ye,getOwnPropertySymbols:Xe});var it=c((function(){ue.f(1)}));w(w.S+w.F*it,"Object",{getOwnPropertySymbols:function(e){return ue.f(U(e))}}),Fe&&w(w.S+w.F*(!Ge||c((function(){var e=Te();return"[null]"!=je([e])||"{}"!=je({a:e})||"{}"!=je(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,o=[e],i=1;arguments.length>i;)o.push(arguments[i++]);if(n=t=o[1],(s(t)||void 0!==e)&&!Ve(e))return de(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!Ve(t))return t}),o[1]=t,je.apply(Fe,o)}}),Te.prototype[Le]||S(Te.prototype,Le,Te.prototype.valueOf),se(Te,"Symbol"),se(Math,"Math",!0),se(o.JSON,"JSON",!0);var rt=i.Object.getOwnPropertySymbols,st=Oe.f;P("getOwnPropertyDescriptor",(function(){return function(e,t){return st(z(e),t)}}));var at=i.Object,ct=function(e,t){return at.getOwnPropertyDescriptor(e,t)},lt=o.Reflect,ut=lt&&lt.ownKeys||function(e){var t=Ie.f(a(e)),n=ue.f;return n?t.concat(n(e)):t},pt=function(e,t,n){t in e?v.f(e,t,y(0,n)):e[t]=n};w(w.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,o=z(e),i=Oe.f,r=ut(o),s={},a=0;r.length>a;)void 0!==(n=i(o,t=r[a++]))&&pt(s,t,n);return s}});var dt=i.Object.getOwnPropertyDescriptors;w(w.S+w.F*!l,"Object",{defineProperties:he});var ht=i.Object,ft=function(e,t){return ht.defineProperties(e,t)},gt=n((function(e){e.exports=function(e,t,n){return t in e?b(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0})),vt=t(gt),yt=t(n((function(e){function t(e,t){var n=te(e);if(rt){var o=rt(e);t&&(o=o.filter((function(t){return ct(e,t).enumerable}))),n.push.apply(n,o)}return n}e.exports=function(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?t(Object(o),!0).forEach((function(t){gt(e,t,o[t])})):dt?ft(e,dt(o)):t(Object(o)).forEach((function(t){b(e,t,ct(o,t))}))}return e},e.exports.default=e.exports,e.exports.__esModule=!0}))),St=t(n((function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0}))),mt=t(n((function(e){function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),b(e,o.key,o)}}e.exports=function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e},e.exports.default=e.exports,e.exports.__esModule=!0}))),_t=i.JSON||(i.JSON={stringify:JSON.stringify}),It=function(e){return _t.stringify.apply(_t,arguments)},wt=new RegExp("%[a-f0-9]{2}","gi"),Ct=new RegExp("(%[a-f0-9]{2})+","gi");function bt(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),o=e.slice(t);return Array.prototype.concat.call([],bt(n),bt(o))}function kt(e){try{return decodeURIComponent(e)}catch(o){for(var t=e.match(wt),n=1;n<t.length;n++)t=(e=bt(t,n).join("")).match(wt);return e}}var xt=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=Ct.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var o=kt(n[0]);o!==n[0]&&(t[n[0]]=o)}n=Ct.exec(e)}t["%C2"]="�";for(var i=Object.keys(t),r=0;r<i.length;r++){var s=i[r];e=e.replace(new RegExp(s,"g"),t[s])}return e}(e)}},Ot=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]},Et=function(e,t){for(var n={},o=Object.keys(e),i=Array.isArray(t),r=0;r<o.length;r++){var s=o[r],a=e[s];(i?-1!==t.indexOf(s):t(s,a,e))&&(n[s]=a)}return n},Pt=n((function(e,t){function n(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function o(e,t){return t.encode?t.strict?encodeURIComponent(e).replace(/[!'()*]/g,e=>"%"+e.charCodeAt(0).toString(16).toUpperCase()):encodeURIComponent(e):e}function i(e,t){return t.decode?xt(e):e}function r(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function s(e){const t=(e=r(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function a(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function c(e,t){n((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const o=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,o)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===o[e]&&(o[e]={}),o[e][t[1]]=n):o[e]=n};case"bracket":return(e,n,o)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==o[e]?o[e]=[].concat(o[e],n):o[e]=[n]:o[e]=n};case"comma":case"separator":return(t,n,o)=>{const r="string"==typeof n&&n.includes(e.arrayFormatSeparator),s="string"==typeof n&&!r&&i(n,e).includes(e.arrayFormatSeparator);n=s?i(n,e):n;const a=r||s?n.split(e.arrayFormatSeparator).map(t=>i(t,e)):null===n?n:i(n,e);o[t]=a};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),r=Object.create(null);if("string"!=typeof e)return r;if(!(e=e.trim().replace(/^[?#&]/,"")))return r;for(const n of e.split("&")){if(""===n)continue;let[e,s]=Ot(t.decode?n.replace(/\+/g," "):n,"=");s=void 0===s?null:["comma","separator"].includes(t.arrayFormat)?s:i(s,t),o(i(e,t),s,r)}for(const e of Object.keys(r)){const n=r[e];if("object"==typeof n&&null!==n)for(const e of Object.keys(n))n[e]=a(n[e],t);else r[e]=a(n,t)}return!1===t.sort?r:(!0===t.sort?Object.keys(r).sort():Object.keys(r).sort(t.sort)).reduce((e,t)=>{const n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((e,t)=>Number(e)-Number(t)).map(e=>t[e]):t}(n):e[t]=n,e},Object.create(null))}t.extract=s,t.parse=c,t.stringify=(e,t)=>{if(!e)return"";n((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const i=n=>t.skipNull&&(e=>null==e)(e[n])||t.skipEmptyString&&""===e[n],r=function(e){switch(e.arrayFormat){case"index":return t=>(n,i)=>{const r=n.length;return void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?n:null===i?[...n,[o(t,e),"[",r,"]"].join("")]:[...n,[o(t,e),"[",o(r,e),"]=",o(i,e)].join("")]};case"bracket":return t=>(n,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?n:null===i?[...n,[o(t,e),"[]"].join("")]:[...n,[o(t,e),"[]=",o(i,e)].join("")];case"comma":case"separator":return t=>(n,i)=>null==i||0===i.length?n:0===n.length?[[o(t,e),"=",o(i,e)].join("")]:[[n,o(i,e)].join(e.arrayFormatSeparator)];default:return t=>(n,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?n:null===i?[...n,o(t,e)]:[...n,[o(t,e),"=",o(i,e)].join("")]}}(t),s={};for(const t of Object.keys(e))i(t)||(s[t]=e[t]);const a=Object.keys(s);return!1!==t.sort&&a.sort(t.sort),a.map(n=>{const i=e[n];return void 0===i?"":null===i?o(n,t):Array.isArray(i)?i.reduce(r(n),[]).join("&"):o(n,t)+"="+o(i,t)}).filter(e=>e.length>0).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[n,o]=Ot(e,"#");return Object.assign({url:n.split("?")[0]||"",query:c(s(e),t)},t&&t.parseFragmentIdentifier&&o?{fragmentIdentifier:i(o,t)}:{})},t.stringifyUrl=(e,n)=>{n=Object.assign({encode:!0,strict:!0},n);const i=r(e.url).split("?")[0]||"",s=t.extract(e.url),a=t.parse(s,{sort:!1}),c=Object.assign(a,e.query);let l=t.stringify(c,n);l&&(l="?"+l);let u=function(e){let t="";const n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(u="#"+o(e.fragmentIdentifier,n)),`${i}${l}${u}`},t.pick=(e,n,o)=>{o=Object.assign({parseFragmentIdentifier:!0},o);const{url:i,query:r,fragmentIdentifier:s}=t.parseUrl(e,o);return t.stringifyUrl({url:i,query:Et(r,n),fragmentIdentifier:s},o)},t.exclude=(e,n,o)=>{const i=Array.isArray(n)?e=>!n.includes(e):(e,t)=>!n(e,t);return t.pick(e,i,o)}})),At=(Pt.extract,Pt.parse,Pt.stringify,Pt.parseUrl,Pt.stringifyUrl,Pt.pick,Pt.exclude,function(){function e(){St(this,e)}return mt(e,[{key:"getAuthorization",value:function(e){return"Basic ".concat(e)}},{key:"getHeaders",value:function(e){return e?yt(yt({},e.contentType?{"Content-Type":e.contentType}:{}),e.basicAuthKey?{Authorization:this.getAuthorization(e.basicAuthKey)}:{}):{}}},{key:"get",value:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=Pt.stringifyUrl({url:e,query:t}),r=new Dt(i,{},{headers:this.getHeaders(o)});r.send(n)}},{key:"post",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0,i=Pt.stringifyUrl({url:e,query:t.params?t.params:{}}),r=new Dt(i,It(t.body),{method:"POST",headers:this.getHeaders(yt({contentType:"application/json;charset=UTF-8"},n))});r.send(o)}}]),e}()),Dt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.url=e,this.data=t,this.options=n};Dt.prototype.send=function(e){var t=this;if(!!window.XDomainRequest){var n=new window.XDomainRequest;xhr.open(this.options.method||"GET",this.url,!0),this.options.headers&&te(this.options.headers).forEach((function(e){n.setRequestHeader(e,t.options.headers[e])})),n.onload=function(){e(200,n.responseText)},n.onerror=function(){e(500,n.responseText)},n.withCredentials=!0,n.ontimeout=function(){},n.onprogress=function(){},n.send(Pt.stringify(this.data))}else{var o=new XMLHttpRequest;o.withCredentials=!0,o.open(this.options.method||"GET",this.url),this.options.headers&&te(this.options.headers).forEach((function(e){o.setRequestHeader(e,t.options.headers[e])})),o.onload=function(){o.status>=200&&o.status<300?e(o.status,o.response):e(o.status,o.statusText)},o.onerror=function(){return e(o.status,o.statusText)},o.send(this.data)}},le("asyncIterator"),le("observable");var Tt=i.Symbol,Ft={},jt={};S(jt,oe("iterator"),(function(){return this}));var Ut,Lt=function(e,t,n){e.prototype=me(jt,{next:y(1,n)}),se(e,t+" Iterator")},Mt=W("IE_PROTO"),Rt=Object.prototype,zt=Object.getPrototypeOf||function(e){return e=U(e),_(e,Mt)?e[Mt]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Rt:null},Nt=oe("iterator"),Bt=!([].keys&&"next"in[].keys()),Gt=function(){return this},Ht=function(e,t,n,o,i,r,s){Lt(n,t,o);var a,c,l,u=function(e){if(!Bt&&e in f)return f[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},p=t+" Iterator",d="values"==i,h=!1,f=e.prototype,g=f[Nt]||f["@@iterator"]||i&&f[i],v=g||u(i),y=i?d?u("entries"):v:void 0,m="Array"==t&&f.entries||g;if(m&&(l=zt(m.call(new e)))!==Object.prototype&&l.next&&se(l,p,!0),d&&g&&"values"!==g.name&&(h=!0,v=function(){return g.call(this)}),s&&(Bt||h||!f[Nt])&&S(f,Nt,v),Ft[t]=v,Ft[p]=Gt,i)if(a={values:d?v:u("values"),keys:r?v:u("keys"),entries:y},s)for(c in a)c in f||ne(f,c,a[c]);else w(w.P+w.F*(Bt||h),t,a);return a},Zt=(Ut=!0,function(e,t){var n,o,i=String(j(e)),r=G(t),s=i.length;return r<0||r>=s?Ut?"":void 0:(n=i.charCodeAt(r))<55296||n>56319||r+1===s||(o=i.charCodeAt(r+1))<56320||o>57343?Ut?i.charAt(r):n:Ut?i.slice(r,r+2):o-56320+(n-55296<<10)+65536});Ht(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=Zt(t,n),this._i+=e.length,{value:e,done:!1})}));var qt=function(e,t){return{value:t,done:!!e}};Ht(Array,"Array",(function(e,t){this._t=z(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,qt(1)):qt(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values");Ft.Arguments=Ft.Array;for(var Kt=oe("toStringTag"),Vt="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),Qt=0;Qt<Vt.length;Qt++){var Wt=Vt[Qt],Jt=o[Wt],$t=Jt&&Jt.prototype;$t&&!$t[Kt]&&S($t,Kt,Wt),Ft[Wt]=Ft.Array}var Yt=ae.f("iterator"),Xt=t(n((function(e){function t(n){return"function"==typeof Tt&&"symbol"==typeof Yt?(e.exports=t=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=t=function(e){return e&&"function"==typeof Tt&&e.constructor===Tt&&e!==Tt.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),t(n)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0})));w(w.S,"Date",{now:function(){return(new Date).getTime()}});var en=i.Date.now,tn="".concat("https","://").concat("idplus.zeotap.com/api/v1/idp"),nn="".concat("https","://").concat("spl-alpha.zeotap.com","/fp"),on={eventRetryDelayMillis:500,eventUploadPeriodMillis:500,eventUploadThreshold:1,uploadBatchSize:1,maxRetries:3,debug:!1,storageExpirationDays:365,onlySecureCookie:!0,allowGAClientId:!0,shouldCheckZeotapVendorConsent:!1,persistenceInCookieStorage:!1,maxEventsQueuedTillConsentUnresolved:10,includeTCFString:!1},rn="set_user_properties",sn="pageView",an="set_meta_properties",cn="optin",ln="gdpr",un="gdpr_consent",pn="z_p",dn="track",hn="identify",fn="cookieSync",gn="ask_consent",vn="consent_set",yn=["email","cellno","loginid","fpuid","cellno_cc","cellno_e164"],Sn=["cellno_without_country_code","cellno_e164","cellno_with_country_code"],mn={email_sha256_lowercase:{id:"email",type:"sha256_lowercase"},email_sha256_uppercase:{id:"email",type:"sha256_uppercase"},email_md5_lowercase:{id:"email",type:"md5_lowercase"},email_md5_uppercase:{id:"email",type:"md5_uppercase"},email_sha1_lowercase:{id:"email",type:"sha1_lowercase"},email_sha1_uppercase:{id:"email",type:"sha1_uppercase"},cellno_without_country_code_sha256:{id:"cellno_without_country_code",type:"sha256"},cellno_without_country_code_md5:{id:"cellno_without_country_code",type:"md5"},cellno_without_country_code_sha1:{id:"cellno_without_country_code",type:"sha1"},cellno_with_country_code_sha256:{id:"cellno_with_country_code",type:"sha256"},cellno_with_country_code_md5:{id:"cellno_with_country_code",type:"md5"},cellno_with_country_code_sha1:{id:"cellno_with_country_code",type:"sha1"},cellno_e164_sha256:{id:"cellno_e164",type:"sha256"},cellno_e164_md5:{id:"cellno_e164",type:"md5"},cellno_e164_sha1:{id:"cellno_e164",type:"sha1"},loginid_sha256_lowercase:{id:"loginid",type:"sha256_lowercase"},loginid_sha256_uppercase:{id:"loginid",type:"sha256_uppercase"},loginid_md5_lowercase:{id:"loginid",type:"md5_lowercase"},loginid_md5_uppercase:{id:"loginid",type:"md5_uppercase"},loginid_sha1_lowercase:{id:"loginid",type:"sha1_lowercase"},loginid_sha1_uppercase:{id:"loginid",type:"sha1_uppercase"},fpuid:{id:"fpuid",type:"fpuid"}},_n="user_idp",In="user_zi",wn="user_zs",Cn="user_email",bn="user_cellno_without_country_code",kn="user_cellno_with_country_code",xn="user_cellno_e164",On="user_fpuid",En="user_ga_client_id",Pn="user_ga_user_id",An="user_loginid",Dn="setUserIdentities",Tn="updateUserIdentities",Fn="setConsent",jn="updateConsent",Un=12,Ln=1,Mn=2,Rn="track",zn="identify",Nn="cookieSync",Bn=function(e,t){return{getWindow:function(){return e},getDocument:function(){return t},getHolderDiv:function(e){var n=t.getElementById(e);return null!=n&&n.parentNode.removeChild(n),(n=t.createElement("div")).setAttribute("style","display:none;"),n.id=e,t.body.appendChild(n),n},insertHTML:function(e,t){e.innerHTML=t}}};w(w.S,"Array",{isArray:de});var Gn=i.Array.isArray,Hn=oe("toStringTag"),Zn="Arguments"==M(function(){return arguments}()),qn=function(e){var t,n,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),Hn))?n:Zn?M(t):"Object"==(o=M(t))&&"function"==typeof t.callee?"Arguments":o},Kn=oe("iterator"),Vn=i.getIteratorMethod=function(e){if(null!=e)return e[Kn]||e["@@iterator"]||Ft[qn(e)]},Qn=i.getIterator=function(e){var t=Vn(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return a(t.call(e))},Wn=function(e,t,n,o){try{return o?t(a(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&a(i.call(e)),t}},Jn=oe("iterator"),$n=Array.prototype,Yn=function(e){return void 0!==e&&(Ft.Array===e||$n[Jn]===e)},Xn=oe("iterator"),eo=!1;try{var to=[7][Xn]();to.return=function(){eo=!0},Array.from(to,(function(){throw 2}))}catch(e){}w(w.S+w.F*!function(e,t){if(!t&&!eo)return!1;var n=!1;try{var o=[7],i=o[Xn]();i.next=function(){return{done:n=!0}},o[Xn]=function(){return i},e(o)}catch(e){}return n}((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,o,i,s=U(e),a="function"==typeof this?this:Array,c=arguments.length,l=c>1?arguments[1]:void 0,u=void 0!==l,p=0,d=Vn(s);if(u&&(l=r(l,c>2?arguments[2]:void 0,2)),null==d||a==Array&&Yn(d))for(n=new a(t=Z(s.length));t>p;p++)pt(n,p,u?l(s[p],p):s[p]);else for(i=d.call(s),n=new a;!(o=i.next()).done;p++)pt(n,p,u?Wn(i,l,[o.value,p],!0):o.value);return n.length=p,n}});var no=i.Array.from,oo=n((function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o},e.exports.default=e.exports,e.exports.__esModule=!0}));t(oo);var io=n((function(e){e.exports=function(e,t){if(e){if("string"==typeof e)return oo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?no(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oo(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0}));t(io);var ro=t(n((function(e){e.exports=function(e,t){var n;if(void 0===Tt||null==e[Yt]){if(Gn(e)||(n=io(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){n=Qn(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,r=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw r}}}},e.exports.default=e.exports,e.exports.__esModule=!0}))),so=function(e,t){this.type=e,this.data=t},ao=function(){this.listeners={}};ao.prototype.listeners=null,ao.prototype.addEventListener=function(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)},ao.prototype.removeEventListener=function(e,t){if(e in this.listeners)for(var n=this.listeners[e],o=0,i=n.length;o<i;o++)if(n[o]===t)return void n.splice(o,1)},ao.prototype.removeAll=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=te(this.listeners);if(e)this.listeners[e]=[];else{var n,o=ro(t);try{for(o.s();!(n=o.n()).done;){var i=n.value;this.listeners[i]=[]}}catch(e){o.e(e)}finally{o.f()}}},ao.prototype.dispatchEvent=function(e){if(!(e.type in this.listeners))return!0;for(var t=this.listeners[e.type].slice(),n=0,o=t.length;n<o;n++)t[n].call(this,e);return!e.defaultPrevented};var co=n((function(e){e.exports=function(e){if(Gn(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0}));t(co);var lo=oe("iterator"),uo=i.isIterable=function(e){var t=Object(e);return void 0!==t[lo]||"@@iterator"in t||Ft.hasOwnProperty(qn(t))},po=n((function(e){e.exports=function(e,t){if(void 0!==Tt&&uo(Object(e))){var n=[],o=!0,i=!1,r=void 0;try{for(var s,a=Qn(e);!(o=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);o=!0);}catch(e){i=!0,r=e}finally{try{o||null==a.return||a.return()}finally{if(i)throw r}}return n}},e.exports.default=e.exports,e.exports.__esModule=!0}));t(po);var ho=n((function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0}));t(ho);var fo=t(n((function(e){e.exports=function(e,t){return co(e)||po(e,t)||io(e,t)||ho()},e.exports.default=e.exports,e.exports.__esModule=!0}))),go=n((function(e){e.exports=function(e){if(Gn(e))return oo(e)},e.exports.default=e.exports,e.exports.__esModule=!0}));t(go);var vo=n((function(e){e.exports=function(e){if(void 0!==Tt&&uo(Object(e)))return no(e)},e.exports.default=e.exports,e.exports.__esModule=!0}));t(vo);var yo=n((function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0}));t(yo);var So,mo=t(n((function(e){e.exports=function(e){return go(e)||vo(e)||io(e)||yo()},e.exports.default=e.exports,e.exports.__esModule=!0}))),_o=(So=Object.freeze({__proto__:null,default:{}}))&&So.default||So,Io=n((function(t,n){var o;t.exports=(o=o||function(t,n){var o;if("undefined"!=typeof window&&window.crypto&&(o=window.crypto),"undefined"!=typeof self&&self.crypto&&(o=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(o=globalThis.crypto),!o&&"undefined"!=typeof window&&window.msCrypto&&(o=window.msCrypto),!o&&void 0!==e&&e.crypto&&(o=e.crypto),!o)try{o=_o}catch(e){}var i=function(){if(o){if("function"==typeof o.getRandomValues)try{return o.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof o.randomBytes)try{return o.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},r=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),s={},a=s.lib={},c=a.Base={extend:function(e){var t=r(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=a.WordArray=c.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||p).stringify(this)},concat:function(e){var t=this.words,n=e.words,o=this.sigBytes,i=e.sigBytes;if(this.clamp(),o%4)for(var r=0;r<i;r++){var s=n[r>>>2]>>>24-r%4*8&255;t[o+r>>>2]|=s<<24-(o+r)%4*8}else for(var a=0;a<i;a+=4)t[o+a>>>2]=n[a>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(i());return new l.init(t,e)}}),u=s.enc={},p=u.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,o=[],i=0;i<n;i++){var r=t[i>>>2]>>>24-i%4*8&255;o.push((r>>>4).toString(16)),o.push((15&r).toString(16))}return o.join("")},parse:function(e){for(var t=e.length,n=[],o=0;o<t;o+=2)n[o>>>3]|=parseInt(e.substr(o,2),16)<<24-o%8*4;return new l.init(n,t/2)}},d=u.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,o=[],i=0;i<n;i++){var r=t[i>>>2]>>>24-i%4*8&255;o.push(String.fromCharCode(r))}return o.join("")},parse:function(e){for(var t=e.length,n=[],o=0;o<t;o++)n[o>>>2]|=(255&e.charCodeAt(o))<<24-o%4*8;return new l.init(n,t)}},h=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},f=a.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var n,o=this._data,i=o.words,r=o.sigBytes,s=this.blockSize,a=r/(4*s),c=(a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0))*s,u=t.min(4*c,r);if(c){for(var p=0;p<c;p+=s)this._doProcessBlock(i,p);n=i.splice(0,c),o.sigBytes-=u}return new l.init(n,u)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),g=(a.Hasher=f.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new g.HMAC.init(e,n).finalize(t)}}}),s.algo={});return s}(Math),o)})),wo=n((function(e,t){var n,o,i,r,s,a,c,l;e.exports=(o=(n=l=Io).lib,i=o.WordArray,r=o.Hasher,s=n.algo,a=[],c=s.SHA1=r.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,o=n[0],i=n[1],r=n[2],s=n[3],c=n[4],l=0;l<80;l++){if(l<16)a[l]=0|e[t+l];else{var u=a[l-3]^a[l-8]^a[l-14]^a[l-16];a[l]=u<<1|u>>>31}var p=(o<<5|o>>>27)+c+a[l];p+=l<20?1518500249+(i&r|~i&s):l<40?1859775393+(i^r^s):l<60?(i&r|i&s|r&s)-1894007588:(i^r^s)-899497514,c=s,s=r,r=i<<30|i>>>2,i=o,o=p}n[0]=n[0]+o|0,n[1]=n[1]+i|0,n[2]=n[2]+r|0,n[3]=n[3]+s|0,n[4]=n[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,o=8*e.sigBytes;return t[o>>>5]|=128<<24-o%32,t[14+(o+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(o+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}}),n.SHA1=r._createHelper(c),n.HmacSHA1=r._createHmacHelper(c),l.SHA1)})),Co=n((function(e,t){var n;e.exports=(n=Io,function(e){var t=n,o=t.lib,i=o.WordArray,r=o.Hasher,s=t.algo,a=[],c=[];!function(){function t(t){for(var n=e.sqrt(t),o=2;o<=n;o++)if(!(t%o))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var o=2,i=0;i<64;)t(o)&&(i<8&&(a[i]=n(e.pow(o,.5))),c[i]=n(e.pow(o,1/3)),i++),o++}();var l=[],u=s.SHA256=r.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,o=n[0],i=n[1],r=n[2],s=n[3],a=n[4],u=n[5],p=n[6],d=n[7],h=0;h<64;h++){if(h<16)l[h]=0|e[t+h];else{var f=l[h-15],g=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,v=l[h-2],y=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;l[h]=g+l[h-7]+y+l[h-16]}var S=o&i^o&r^i&r,m=(o<<30|o>>>2)^(o<<19|o>>>13)^(o<<10|o>>>22),_=d+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&u^~a&p)+c[h]+l[h];d=p,p=u,u=a,a=s+_|0,s=r,r=i,i=o,o=_+(m+S)|0}n[0]=n[0]+o|0,n[1]=n[1]+i|0,n[2]=n[2]+r|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+u|0,n[6]=n[6]+p|0,n[7]=n[7]+d|0},_doFinalize:function(){var t=this._data,n=t.words,o=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(o/4294967296),n[15+(i+64>>>9<<4)]=o,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=r._createHelper(u),t.HmacSHA256=r._createHmacHelper(u)}(Math),n.SHA256)})),bo=n((function(e,t){var n;e.exports=(n=Io,function(e){var t=n,o=t.lib,i=o.WordArray,r=o.Hasher,s=t.algo,a=[];!function(){for(var t=0;t<64;t++)a[t]=4294967296*e.abs(e.sin(t+1))|0}();var c=s.MD5=r.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var o=t+n,i=e[o];e[o]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var r=this._hash.words,s=e[t+0],c=e[t+1],h=e[t+2],f=e[t+3],g=e[t+4],v=e[t+5],y=e[t+6],S=e[t+7],m=e[t+8],_=e[t+9],I=e[t+10],w=e[t+11],C=e[t+12],b=e[t+13],k=e[t+14],x=e[t+15],O=r[0],E=r[1],P=r[2],A=r[3];O=l(O,E,P,A,s,7,a[0]),A=l(A,O,E,P,c,12,a[1]),P=l(P,A,O,E,h,17,a[2]),E=l(E,P,A,O,f,22,a[3]),O=l(O,E,P,A,g,7,a[4]),A=l(A,O,E,P,v,12,a[5]),P=l(P,A,O,E,y,17,a[6]),E=l(E,P,A,O,S,22,a[7]),O=l(O,E,P,A,m,7,a[8]),A=l(A,O,E,P,_,12,a[9]),P=l(P,A,O,E,I,17,a[10]),E=l(E,P,A,O,w,22,a[11]),O=l(O,E,P,A,C,7,a[12]),A=l(A,O,E,P,b,12,a[13]),P=l(P,A,O,E,k,17,a[14]),O=u(O,E=l(E,P,A,O,x,22,a[15]),P,A,c,5,a[16]),A=u(A,O,E,P,y,9,a[17]),P=u(P,A,O,E,w,14,a[18]),E=u(E,P,A,O,s,20,a[19]),O=u(O,E,P,A,v,5,a[20]),A=u(A,O,E,P,I,9,a[21]),P=u(P,A,O,E,x,14,a[22]),E=u(E,P,A,O,g,20,a[23]),O=u(O,E,P,A,_,5,a[24]),A=u(A,O,E,P,k,9,a[25]),P=u(P,A,O,E,f,14,a[26]),E=u(E,P,A,O,m,20,a[27]),O=u(O,E,P,A,b,5,a[28]),A=u(A,O,E,P,h,9,a[29]),P=u(P,A,O,E,S,14,a[30]),O=p(O,E=u(E,P,A,O,C,20,a[31]),P,A,v,4,a[32]),A=p(A,O,E,P,m,11,a[33]),P=p(P,A,O,E,w,16,a[34]),E=p(E,P,A,O,k,23,a[35]),O=p(O,E,P,A,c,4,a[36]),A=p(A,O,E,P,g,11,a[37]),P=p(P,A,O,E,S,16,a[38]),E=p(E,P,A,O,I,23,a[39]),O=p(O,E,P,A,b,4,a[40]),A=p(A,O,E,P,s,11,a[41]),P=p(P,A,O,E,f,16,a[42]),E=p(E,P,A,O,y,23,a[43]),O=p(O,E,P,A,_,4,a[44]),A=p(A,O,E,P,C,11,a[45]),P=p(P,A,O,E,x,16,a[46]),O=d(O,E=p(E,P,A,O,h,23,a[47]),P,A,s,6,a[48]),A=d(A,O,E,P,S,10,a[49]),P=d(P,A,O,E,k,15,a[50]),E=d(E,P,A,O,v,21,a[51]),O=d(O,E,P,A,C,6,a[52]),A=d(A,O,E,P,f,10,a[53]),P=d(P,A,O,E,I,15,a[54]),E=d(E,P,A,O,c,21,a[55]),O=d(O,E,P,A,m,6,a[56]),A=d(A,O,E,P,x,10,a[57]),P=d(P,A,O,E,y,15,a[58]),E=d(E,P,A,O,b,21,a[59]),O=d(O,E,P,A,g,6,a[60]),A=d(A,O,E,P,w,10,a[61]),P=d(P,A,O,E,h,15,a[62]),E=d(E,P,A,O,_,21,a[63]),r[0]=r[0]+O|0,r[1]=r[1]+E|0,r[2]=r[2]+P|0,r[3]=r[3]+A|0},_doFinalize:function(){var t=this._data,n=t.words,o=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var r=e.floor(o/4294967296),s=o;n[15+(i+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),n[14+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),t.sigBytes=4*(n.length+1),this._process();for(var a=this._hash,c=a.words,l=0;l<4;l++){var u=c[l];c[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return a},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,n,o,i,r,s){var a=e+(t&n|~t&o)+i+s;return(a<<r|a>>>32-r)+t}function u(e,t,n,o,i,r,s){var a=e+(t&o|n&~o)+i+s;return(a<<r|a>>>32-r)+t}function p(e,t,n,o,i,r,s){var a=e+(t^n^o)+i+s;return(a<<r|a>>>32-r)+t}function d(e,t,n,o,i,r,s){var a=e+(n^(t|~o))+i+s;return(a<<r|a>>>32-r)+t}t.MD5=r._createHelper(c),t.HmacMD5=r._createHmacHelper(c)}(Math),n.MD5)})),ko=function(e){this.value="string"!=typeof e?"".concat(e):e.trim()};ko.prototype.sha256=function(){return Co(this.value).toString()},ko.prototype.sha1=function(){return wo(this.value).toString()},ko.prototype.md5=function(){return bo(this.value).toString()},ko.prototype.sha256u=function(){return Co(this.value.toUpperCase()).toString()},ko.prototype.sha256l=function(){return Co(this.value.toLowerCase()).toString()},ko.prototype.sha1u=function(){return wo(this.value.toUpperCase()).toString()},ko.prototype.sha1l=function(){return wo(this.value.toLowerCase()).toString()},ko.prototype.md5u=function(){return bo(this.value.toUpperCase()).toString()},ko.prototype.md5l=function(){return bo(this.value.toLowerCase()).toString()},ko.prototype.all=function(){return{sha256u:this.sha256u(),sha256l:this.sha256l()}};var xo=function(){if("undefined"!=typeof console){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];(e=console).log.apply(e,mo(["[zeotap]"].concat(n)))}};var Oo=function(e){switch(Object.prototype.toString.call(e)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return null===e?"null":void 0===e?"undefined":e!=e?"nan":e&&1===e.nodeType?"element":"undefined"!=typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(e)?"buffer":(e=e.valueOf?e.valueOf():Object.prototype.valueOf.apply(e),Xt(e))},Eo=function(e){return null==e},Po=function(e){return Eo(e)||"string"===Oo(e)&&e.length<=0},Ao=function(e){return String.prototype.replace.call(e,/[\(\)\+\-]/gi,"")},Do=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:31536e3,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=o?escape(String.prototype.trim.call(e))+"="+escape(t):escape(String.prototype.trim.call(e))+"="+escape(t)+";max-age="+n+";";document.cookie=i},To=function(e){for(var t=escape(String.prototype.trim.call(e))+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var i=n[o];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null},Fo=function(e){Do(e,"",-1)},jo=function(e){return Uo()?window.localStorage.getItem(e):To(e)},Uo=function(){try{if(window.localStorage){return window.localStorage.setItem("rtesting","rtesting"),window.localStorage.removeItem("rtesting"),!0}return!1}catch(e){return!1}},Lo=function(){try{if(window.sessionStorage){return window.sessionStorage.setItem("rtesting","rtesting"),window.sessionStorage.removeItem("rtesting"),!0}return!1}catch(e){return!1}},Mo=function(e,t){return"string"==typeof t&&""!==t?vt({},e,t):{}},Ro=function(e,t){return{cellno:t,cellno_cc:e+""+t,cellno_e164:"+"+e+t}},zo=function e(t){if("object"!==Oo(t))return{};if(te(t).length>100)return{};var n={};for(var o in t)if(t.hasOwnProperty(o)){var i=o;"string"!==Oo(i)&&(i=String(i));var r=t[i];if("object"===Oo(r))r=e(r);else if("string"!==Oo(r)||Po(r))continue;n[i]=r}return n},No=function(e){if("object"!==Oo(e))return{};if(te(e).length>100)return{};var t={};for(var n in e)if(e.hasOwnProperty(n)){var o=n;"string"!==Oo(o)&&(o=String(o));var i=Bo(e[o]);null!==i&&(t[o]=i)}return t},Bo=function(e){var t=e;return-1===["object","string","boolean","number"].indexOf(Oo(t))?null:"object"===Oo(t)?No(e):e},Go=function(e){if("object"!==Oo(e))return{};if(te(e).length>100)return{};var t={};for(var n in e)if(e.hasOwnProperty(n)){var o=n;"string"!==Oo(o)&&(o=String(o));var i=Zo(e[o]);null!==i&&(t[o]=i)}return t},Ho=["nan","function","arguments","regexp","element","error"],Zo=function e(t){var n=Oo(t);if(-1!==Ho.indexOf(n))t=null;else if("undefined"===n)t=null;else if("array"===n){for(var o=[],i=0;i<t.length;i++){var r=t[i],s=Oo(r);"array"!==s&&("object"===s?o.push(Go(r)):o.push(e(r)))}t=o}else"object"===n&&(t=Go(t));return t},qo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{hashfn:"all"},n={},o=new ko(e);return"all"===t.hashfn?t.includeLC&&t.includeUC?(n.sha256_lowercase=o.sha256l(),n.sha256_uppercase=o.sha256u(),n.sha1_lowercase=o.sha1l(),n.sha1_uppercase=o.sha1u(),n.md5_lowercase=o.md5l(),n.md5_uppercase=o.md5u()):(n.sha256=o.sha256(),n.sha1=o.sha1(),n.md5=o.md5()):"sha256"===t.hashfn?n.sha256=o.sha256():"sha1"===t.hashfn?n.sha1=o.sha1():"md5"===t.hashfn&&(n.md5=o.md5()),n},Ko=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if("array"===Oo(t)||"object"===Oo(e)){var n={};for(var o in e)-1===t.indexOf(o)&&(n[o]=e[o]);return n}},Vo=function(e){return e.includes(" ")},Qo=function(e){return!!e&&"object"===Xt(e)&&!!e.cellno&&"string"==typeof e.cellno&&""!==e.cellno},Wo=function(e){return!!e&&"object"===Xt(e)&&!!e.cellno_cc&&"string"==typeof e.cellno_cc&&""!==e.cellno_cc},Jo={log:xo,isNullOrEmpty:Eo,isEmptyString:Po,getTimeStamp:function(){return(new Date).getTime()},cleanCellNumber:Ao,getUUIDv4:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},readFromStorage:jo,writeToStorage:function(e,t){Uo()?window.localStorage.setItem(e,t):Do(e,t)},clearFromStorage:function(e){Eo(jo(e))||(Uo()?window.localStorage.removeItem(e):Fo(e))},getSessionVal:function(e){return Lo()?window.sessionStorage.getItem(e):To(e)},setSessionVal:function(e,t){if(!Lo())return Do(e,t,0,!0);window.sessionStorage.setItem(e,t)},clearSessionVal:function(e){if(!Lo())return Fo(e,value);window.sessionStorage.removeItem(e)},hasGdprConsent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.reduce((function(t,n){return t&&e[n]}),!0)},onlyCallOnceCallback:function(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}},getType:Oo,validateIdentitiesObject:zo,validateStorageObject:No,validateProperties:Go,hash:qo,hashIdentities:function(e){var t=zo(e),n={};if("object"!==Oo(t))return{};if("string"===Oo(t.email)&&t.email&&(n.email=qo(t.email,{hashfn:"all",removeOriginal:!0,includeLC:!0,includeUC:!0})),"string"===Oo(t.loginid)&&t.loginid&&(n.loginid=qo(t.loginid,{hashfn:"all",removeOriginal:!0,includeLC:!0,includeUC:!0})),"string"===Oo(t.fpuid)&&t.fpuid&&(n.fpuid=t.fpuid),"string"===Oo(t.cellno)&&t.cellno){var o=Ao(t.cellno);n.cellno=qo("".concat(o),{hashfn:"all",removeOriginal:!0})}if("string"===Oo(t.cellno_cc)&&t.cellno_cc){var i=Ao(t.cellno_cc);n.cellno_cc=qo("".concat(i),{hashfn:"all",removeOriginal:!0})}"string"===Oo(t.cellno_e164)&&t.cellno_e164&&(n.cellno_e164=qo(t.cellno_e164,{hashfn:"all",removeOriginal:!0}));var r=te(t).reduce((function(e,n){return yn.indexOf(n)<0&&(e[n]=t[n]),e}),{});return yt(yt({},n),r)},removePropertiesfromObject:Ko,transformIdentitiesToUserProperties:function(e){if(Eo(e)||"object"!==Oo(e))return xo("Invalid Identities object found returning empty object instead"),{};var t=yt({},e);return t.cellno&&(t.cellno_without_country_code=t.cellno,t=Ko(t,["cellno"])),t.cellno_cc&&(t.cellno_with_country_code=t.cellno_cc,t=Ko(t,["cellno_cc"])),t},base64:{encode:function(e){return encodeURIComponent(btoa(e))},decode:function(e){return atob(decodeURIComponent(e))}},getLocation:function(){return window&&window.location?window.location:{pathname:"",href:""}},getReferrer:function(){return document.referrer},getQueryParamMap:function(e){return Pt.parse(e)},flattenObject:function e(t){var n={};for(var o in t)if(t.hasOwnProperty(o))if("object"==Xt(t[o])&&null!==t[o]){var i=e(t[o]);for(var r in i)i.hasOwnProperty(r)&&(n[o+"."+r]=i[r])}else n[o]=t[o];return n},validateRawIdentities:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("object"!==Xt(e)||null===e)return{};if(t){if(Qo(e)){e=Ko(e,["cellno_cc"]);var n=Ao(e.cellno).trim();if(Vo(e.cellno.trim())){var o=n.split(" ");e=yt(yt({},e),Ro(o[0],o[1]))}else e=yt(yt({},e),{},{cellno_cc:n,cellno_e164:"+"+n})}else if(Wo(e)){var i=Ao(e.cellno_cc).trim();e=yt(yt({},e),{},{cellno_e164:"+"+i})}}else Qo(e)&&Vo(e.cellno.trim())?(e.cellno_cc=e.cellno,e=Ko(e,["cellno"])):Wo(e)&&Vo(e.cellno_cc.trim())||Qo(e)&&Wo(e)?e=Ko(e,["cellno"]):Qo(e)&&(e.cellno_cc=e.cellno,e=Ko(e,["cellno"]));return te(e).reduce((function(t,n){return yt(yt({},t),Mo(n,e[n]))}),{})},validateHashedIdentities:function(e){if("object"!==Xt(e))return{};var t={};return te(e).forEach((function(n){var o=mn[n];o&&"string"==typeof e[n]&&""!==e[n]?t[o.id]?t[o.id][o.type]=e[n]:"fpuid"===o.id?t[o.id]=e[n]:t[o.id]=vt({},o.type,e[n]):yn.indexOf(n)>=0?console.warn("Invalid identity [".concat(n,"] set. Identity attribute should belong to: [ ").concat(te(mn)," ]")):"string"==typeof e[n]&&""!==e[n]&&(t[n]=e[n])})),t},getCustomIdentities:function(e){return te(e).reduce((function(t,n){return yn.indexOf(n)<0&&Sn.indexOf(n)<0&&te(mn).indexOf(n)<0&&(t["user_"+n]=e[n]),t}),{})},domainSpecific:function(e,t){var n="";return!t.ignoreSuffix&&t.domain&&(n="."===t.domain.charAt(0)?t.domain.substring(1):t.domain),e+n},hash256:function(e){return new ko(e).sha256()},getIdentitesSPLEventName:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(var o in t){if(!e[o])return Dn;if(e[o])if(yn.indexOf(o)>=0){if(n){var i=e[o].sha256?"sha256":"sha256_lowercase";if(e[o][i]!==t[o][i])return Tn}else if(e[o]!==t[o])return Tn}else if(e[o]!==t[o])return Tn}return null},sanitizeEmail:function(e){var t=e.split("@"),n=fo(t,2),o=n[0],i=n[1];return o=o.replace(/[+.]/g,""),"".concat(o,"@").concat(i)},isObjectEmpty:function(e){return"object"===Xt(e)&&0===te(e).length}};function $o(e,t){this.resolved=!!Jo.isNullOrEmpty(e.resolved)||e.resolved,this.consentString=e.consentString&&"string"==typeof e.consentString?e.consentString:"",this.gdprApplies=!(!e.gdprApplies||"boolean"!=typeof e.gdprApplies)&&e.gdprApplies,this.track=!(!e.track||"boolean"!=typeof e.track)&&e.track,this.identify=!(!e.identify||"boolean"!=typeof e.identify)&&e.identify,this.cookieSync=!(!e.cookieSync||"boolean"!=typeof e.cookieSync)&&e.cookieSync,this.vendorConsent=!(!e.vendorConsent||"boolean"!=typeof e.vendorConsent)&&e.vendorConsent,this.consentForBrandPurposes=t&&te(t).length?t:e.consentForBrandPurposes}var Yo=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ao;St(this,e),this._options=yt({},on),this.onOptionsChangeEvent=t}return mt(e,[{key:"apiKey",get:function(){this._options.apiKey},set:function(e){this._options.apiKey=e}},{key:"options",get:function(){return this._options},set:function(e){this._options=yt(yt({},this._options),e)}},{key:"persistentStorageKeySuffix",get:function(){return"_"+Jo.base64.encode(this._options.apiKey)}},{key:"domain",set:function(e){this._options.domain=e}},{key:"validateOptions",value:function(e){e.areIdentitiesHashed&&e.hashIdentities&&console.error("Cannot transform hashed identities.")}},{key:"setOptions",value:function(e){this.validateOptions(e),"object"===Xt(e)&&(this._options=yt(yt({},this._options),e||{}),this.onOptionsChangeEvent.dispatchEvent(new Event("optionsChange",this._options)))}},{key:"getStorageOptions",value:function(){return{expirationDays:this._options.storageExpirationDays,domain:this._options.domain,secure:this._options.onlySecureCookie,persistenceInCookieStorage:this._options.persistenceInCookieStorage}}},{key:"listenToOptionsChange",value:function(e){e(new Event("optionsChange",this._options)),this.onOptionsChangeEvent.addEventListener("optionsChange",e)}},{key:"removeOptionsChangeListener",value:function(e){this.onOptionsChangeEvent.removeEventListener("optionsChange",e)}}]),e}(),Xo=["trace","debug","info","warn","error"],ei=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F;St(this,e),this.log=t}return mt(e,[{key:"updateLogger",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=window.location.search,o=/[?&]zeo_debug=([^&]*)/,i=n.match(o),r=!1;i&&void 0!==i[1]&&(r=i[1]),e||r?(this.log.enableAll(),Xo.find((function(e){return e===t}))?this.log.setLevel(t):this.log.setLevel("info")):this.log.disableAll()}},{key:"setLoggerStatus",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"debug";e?(this.log.enableAll(),Xo.find((function(e){return e===t}))?this.log.setLevel(t):this.log.setLevel("warn")):this.log.disableAll()}},{key:"logInfo",value:function(e,t){for(var n,o="%c[".concat(e,"]:: ").concat(t),i="color: green; font-weight: bold",r=arguments.length,s=new Array(r>2?r-2:0),a=2;a<r;a++)s[a-2]=arguments[a];(n=this.log).info.apply(n,[o,i].concat(s))}},{key:"logWarning",value:function(e,t){for(var n,o="%c[".concat(e,"]:: ").concat(t),i="color: red; font-weight: bold",r=arguments.length,s=new Array(r>2?r-2:0),a=2;a<r;a++)s[a-2]=arguments[a];(n=this.log).warn.apply(n,[o,i].concat(s))}},{key:"logError",value:function(e,t){for(var n,o="%c[".concat(e,"]:: ").concat(t),i="color: pruple; font-weight: bold",r=arguments.length,s=new Array(r>2?r-2:0),a=2;a<r;a++)s[a-2]=arguments[a];(n=this.log).error.apply(n,[o,i].concat(s))}}]),e}(),ti=function(){function e(t,n,o){var i=this;St(this,e),this.cookie=n,this.localStorage=o,this.optionsService=t,this.tld=this.cookie.getTld(),this.optionsService.listenToOptionsChange((function(){var e=i.optionsService.getStorageOptions();i.options=e,i.options.domain=i.cookie.getValidDomain(e)}))}return mt(e,[{key:"isCookieEnabledInOptions",get:function(){return this.optionsService._options.persistenceInCookieStorage}},{key:"isCookieEnabled",value:function(){if(void 0!==this.isCookieEnabledValue)return this.isCookieEnabledValue;var e,t=String(new Date);try{return this.cookie.set("ztestc",t,{domain:this.tld}),e=this.cookie.get("ztestc",{domain:this.tld})===t,this.cookie.remove("ztestc",{domain:this.tld}),this.isCookieEnabledValue=e,e}catch(e){this.isCookieEnabledValue=!1}return this.isCookieEnabledValue=!1,!1}},{key:"getStorage",value:function(e){return e?this.localStorage:this.isCookieEnabled()?this.cookie:this.localStorage}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=yt(yt({},this.options),n);this.getStorage(o).set(e,t,yt(yt({},i),{},{domain:i.domain?i.domain:this.tld}))}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=yt(yt({},this.options),t);return this.getStorage(n).get(e,yt(yt({},o),{},{domain:o.domain?o.domain:this.tld}))}},{key:"remove",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=yt(yt({},this.options),t);return this.getStorage(n).remove(e,yt(yt({},o),{},{domain:o.domain?o.domain:this.tld}))}},{key:"setSessionStorage",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=t){var o,i,r=yt({},this.options),s=Jo.domainSpecific(e,yt(yt({},r),{},{domain:r.domain?r.domain:this.tld}));if(n.hash)o=n.isString?Jo.hash256(t):Jo.hash256(It(t)),sessionStorage.setItem(s,Jo.base64.encode(o));else i=n.isString?t:It(t),sessionStorage.setItem(s,Jo.base64.encode(i))}}},{key:"getSessionStorage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=yt({},this.options),o=Jo.domainSpecific(e,yt(yt({},n),{},{domain:n.domain?n.domain:this.tld})),i=sessionStorage.getItem(o);try{if(i)return t.isString||t.hash?Jo.base64.decode(i):JSON.parse(Jo.base64.decode(i))}catch(e){return null}}},{key:"removeSessionStorage",value:function(e){var t=yt({},this.options),n=Jo.domainSpecific(e,yt(yt({},t),{},{domain:t.domain?t.domain:this.tld}));sessionStorage.removeItem(n)}},{key:"getFromCookieOrSession",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=yt(yt({},this.options),t);return this.isCookieEnabledInOptions&&this.isCookieEnabled()?this.cookie.get(e,yt(yt({},n),{},{domain:n.domain?n.domain:this.tld})):this.getSessionStorage(e,t)}},{key:"setInCookieOrSession",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=yt(yt({},this.options),n);this.isCookieEnabledInOptions&&this.isCookieEnabled()?this.cookie.set(e,t,yt(yt({},o),{},{domain:o.domain?o.domain:this.tld})):this.setSessionStorage(e,t,n)}},{key:"removeFromCookieOrSession",value:function(e,t){var n=yt(yt({},this.options),t);this.isCookieEnabledInOptions&&this.isCookieEnabled()?this.cookie.remove(e,yt(yt({},n),{},{domain:n.domain?n.domain:this.tld})):this.removeSessionStorage(e)}}]),e}(),ni=301,oi=["1","2","3","5"],ii=null,ri=null,si=null,ai=6e4,ci=[[1,3,4],[1,5,6]],li=[1,9],ui=[[1,3,4],[1,5,6]],pi=function(){var e=ii.__tcfapi||ii.__cmp;return e&&"function"===Jo.getType(e)?e:null},di=function(){var e=pi()||function(){};e.apply(void 0,arguments)},hi=function(){return!!pi()},fi=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return setTimeout((function(){di("ping",vi(),(function(t){e(t)}))}),t||ai)},gi=function(e){"number"===Jo.getType(e)&&(ai=e)},vi=function(){return ii.__tcfapi&&"function"===Jo.getType(ii.__tcfapi)?2:ii.__cmp&&"function"===Jo.getType(ii.__cmp)?1:0},yi=function(e){2===vi()&&di("removeEventListener",2,(function(e){}),e)},Si=function(e){return{track:e,identify:e,cookieSync:e,vendorConsent:e}},mi=function(e,t){var n,o=t.purposesForTracking;if(e){var i;if(t.shouldCheckZeotapVendorConsent){var r,s;if(null==e||null===(r=e.vendor)||void 0===r||!r.consents[ni]||null==e||null===(s=e.purpose)||void 0===s||!s.consents)return!1;n=e.purpose.consents}else{if(null==e||null===(i=e.purpose)||void 0===i||!i.consents)return!1;n=e.purpose.consents}return null!=o&&o.length?o.every((function(e){return!!n[e]})):ci[0].every((function(e){return!!n[e]}))||ci[1].every((function(e){return!!n[e]}))}return!1},_i=function(e,t){var n,o,i=!(null==e||null===(n=e.vendor)||void 0===n||!n.consents[ni]),r=null==e||null===(o=e.purpose)||void 0===o?void 0:o.consents;return!(!i||!r)&&(null!=t&&t.length?t.every((function(e){return!!r[e]})):li.every((function(e){return!!r[e]})))},Ii=function(e,t){var n,o=null==e||null===(n=e.purpose)||void 0===n?void 0:n.consents;return!!o&&(null!=t&&t.length?t.every((function(e){return!!o[e]})):ui[0].every((function(e){return!!o[e]}))||ui[1].every((function(e){return!!o[e]})))},wi=function(e,t){return function(n,o){if(clearTimeout(e),o){if("object"!==Xt(n))return yi(n.listenerId),void t(yt({},Si(!1)));if(n.gdprApplies||(yi(n.listenerId),t(yt({gdprApplies:!1},Si(!1)))),"tcloaded"===n.eventStatus||"useractioncomplete"===n.eventStatus){var i=yt({gdprApplies:!0,consentString:n.tcString},function(e,t){var n;return{track:mi(e,t),identify:_i(e,t.purposesForIdentifying),cookieSync:Ii(e,t.purposesForCookieSync),vendorConsent:!(null==e||null===(n=e.vendor)||void 0===n||!n.consents[ni])}}(n,si.options));ri.logInfo("GDPRCMP Module: getConsentData","Consent resolved successfully."),ri.logInfo("GDPRCMP Module: getConsentData","tcData: ".concat(n)),ri.logInfo("GDPRCMP Module: getConsentData","SDKConsent: ".concat(i)),t(i)}else ri.logInfo("GDPRCMP Module: getConsentData","Consent Data is still not resolved."),t({resolved:!1})}else ri.logInfo("GDPRCMP Module: getConsentData","Could not be registered resort to donotTrack"),t(yt({},Si(!1)))}},Ci=function(e){var t=vi(),n=fi((function(n){!function(e,t,n){t.cmpLoaded||(ri.logInfo("GDPRCMP Module: getConsentData","CMP is not yet loaded"),n(yt(2==e?{gdprApplies:t.gdprApplies}:{gdprApplies:t.gdprAppliesGlobally},Si(!1))))}(t,n,e)}));if(2===t){var o=wi(n,e);di("addEventListener",2,o)}else{var i=function(e,t){return function(n,o){if(clearTimeout(e),o){var i=n.purposeConsents;n.gdprApplies?di("getConsentData",null,(function(e,n){if(n){var o=e.consentData;!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.reduce((function(t,n){return t&&!!e[n]}),!0)}(i,oi)?t(yt({consentString:o,gdprApplies:!0},Si(!1))):t(yt({consentString:o,gdprApplies:!0},Si(!0)))}else t(yt({gdprApplies:!0},Si(!1)))})):t(yt({gdprApplies:!1},Si(!1)))}else t(yt({},Si(!1)))}}(n,e);di("getVendorConsents",[ni],i)}},bi=function(e){var t=0,n=null;!function o(){ri.logInfo("GDPRCMP Module: getConsentData","Searching CMP...."),ri.logInfo("GDPRCMP Module: getConsentData","Retry : ",t),hi()?(ri.logInfo("GDPRCMP Module: getConsentData","CMP Found"),Ci(e)):t<10?(clearTimeout(n),t++,n=setTimeout(o,1e3),1===t&&(ri.logInfo("GDPRCMP Module: getConsentData","Resolving with False..."),e({resolved:!1}))):(ri.logInfo("GDPRCMP Module: getConsentData","Searching CMP reached timeout."),e(yt({},Si(!1))))}()};function ki(e,t,n){return ii=e,ri=n,si=t,{check:hi,setPingTimeout:gi,getTcfVersion:vi,pingAfter:fi,getConsentData:bi}}var xi=function(e){return"zpstorage_"+Jo.base64.encode(e)+"cookieSyncTS"},Oi=function(e){return"zpstorage_"+Jo.base64.encode(e)+"consent"},Ei=function(e){return"zpstorage_"+Jo.base64.encode(e)+"brandConsent"},Pi=function(){function e(t,n,o){var i=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new ao,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Bn(window,document);St(this,e),this.optionsService=t,this.storageService=n,this.logger=o,this._consent=null,this._brandConsent=null,this.eventTarget=r,this.domUtils=s,this.askForConsentDispatched=!1,this.gdprCMP=ki(this.domUtils.getWindow(),this.optionsService,this.logger),this._tcfString=null,this.eventTarget.addEventListener(vn,(function(e){var t=e.data;e.type;i.askForConsentDispatched=!1,i.setConsent(t.consent,t.consentForBrandPurposes)}))}return mt(e,[{key:"listenToOnConsentSet",value:function(e){this.logger.logInfo("listenToOnConsentSet","attaching callback for set consent event."),this.eventTarget.addEventListener("consentSet",e)}},{key:"listenToOnConsentResolve",value:function(e){this.logger.logInfo("listenToOnConsentResolve","attaching callback for consent resolve."),this.eventTarget.addEventListener("consentResolve",e)}},{key:"removeOnConsentSetListener",value:function(e){this.logger.logInfo("removeOnConsentSetListener","removing set consent event listener."),this.eventTarget.removeEventListener("consentSet",e)}},{key:"removeOnConsentResolveListener",value:function(e){this.logger.logInfo("removeOnConsentResolveListener","removing Resolve consent event listener."),this.eventTarget.removeEventListener("consentResolve",e)}},{key:"consent",get:function(){return this._consent},set:function(e){this._consent=new $o(yt(yt({},this._consent?this._consent:{}),e))}},{key:"setConsent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Jo.isObjectEmpty(t)?this.setPrimaryConsent(e):Jo.isObjectEmpty(e)?this.setBrandConsent(t):Jo.isObjectEmpty(t)||Jo.isObjectEmpty(e)||(this.setBrandConsent(t,this.isCustomPrimaryConsentSame(e)),this.setPrimaryConsent(e))}},{key:"isCustomPrimaryConsentSame",value:function(e){var t;return!(null===(t=this._consent)||void 0===t||!t.resolved)&&(e[Rn]===this._consent[Rn]&&e[Nn]===this._consent[Nn]&&e[zn]===this._consent[zn])}},{key:"setPrimaryConsent",value:function(e){var t=this.getConsentFromStorageAsHashedString(),n=It(new $o(e)),o=Jo.hash256(n);this._consent=new $o(e),this.eventTarget.dispatchEvent(new so("consentResolve",this._consent)),t!==o&&(this.eventTarget.dispatchEvent(new so("consentSet",this._consent)),this.saveConsentToStorageAsHashedString())}},{key:"setBrandConsent",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.getBrandConsentFromStorageAsHashedString(),o=It(e),i=Jo.hash256(o);this._brandConsent=yt(yt({},this._brandConsent),e),n!==i&&(t&&this.eventTarget.dispatchEvent(new so("consentSet",this._consent)),this.saveBrandConsetToStorageAsHashedString())}},{key:"saveConsentToStorageAsHashedString",value:function(){var e=this.optionsService.options.apiKey||this.optionsService.options.partnerId,t=Oi(e);this.logger.logInfo("saveConsentToStorage","Setting consent to cookie storage with name: ",t),this.storageService.removeFromCookieOrSession(t),this.storageService.setInCookieOrSession(t,this._consent,{hash:!0,isString:!1})}},{key:"saveBrandConsetToStorageAsHashedString",value:function(){var e=this.optionsService.options.apiKey||this.optionsService.options.partnerId,t=Ei(e);this.logger.logInfo("saveBrandConsentToStorage","Setting brand consent to cookie storage with name: ",t),this.storageService.removeFromCookieOrSession(t),this.storageService.setInCookieOrSession(t,this._brandConsent,{hash:!0,isString:!1})}},{key:"getConsentFromStorageAsHashedString",value:function(){var e=this.optionsService.options.apiKey||this.optionsService.options.partnerId,t=this.storageService.getFromCookieOrSession(Oi(e),{hash:!0});return this.logger.logInfo("getConsentFromStorage","Getting consent from storage",t),t}},{key:"getBrandConsentFromStorageAsHashedString",value:function(){var e=this.optionsService.options.apiKey||this.optionsService.options.partnerId,t=this.storageService.getFromCookieOrSession(Ei(e),{hash:!0});return this.logger.logInfo("getBrandConsentFromStorage","Getting brand consent from storage",t),t}},{key:"removeConsentFromStorageAsHashedString",value:function(){var e=this.optionsService.options.apiKey||this.optionsService.options.partnerId;this.storageService.removeFromCookieOrSession(Oi(e))}},{key:"getConsent",value:function(){return this._consent}},{key:"hasConsent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this._consent&&this._consent.resolved)switch(this.logger.logInfo("hasConsent","Checking if action has consent: ",e),e){case"identify":return this._consent.identify;case"track":return this._consent.track;case"cookieSync":return this._consent.cookieSync;case"vendor":return this._consent.vendorConsent;default:return!1}return!1}},{key:"getGDPRParams",value:function(){return this.optionsService.options.useConsent?this.optionsService.options.checkForCMP?yt(vt({cmp:1,vendorConsent:this._consent.vendorConsent},ln,this._consent.gdprApplies?1:0),this._consent.consentString?vt({},un,this._consent.consentString):{}):void 0:{}}},{key:"getBrandConsentParams",value:function(){return yt({},this._brandConsent&&te(this._brandConsent).length?vt({},pn,btoa(It(this.prefixUserToAllKeys(this._brandConsent)))):{})}},{key:"prefixUserToAllKeys",value:function(e){var t={};for(var n in e)t["user_"+n]=e[n];return t}},{key:"getConsentQueryParams",value:function(){var e;return yt(yt(yt((vt(e={},cn,this._consent.track||this._consent.identify||this._consent.cookieSync?"yes":"no"),vt(e,dn,this._consent.track),vt(e,hn,this._consent.identify),vt(e,fn,!1!==this.optionsService.options.allowCookieSync&&this._consent.cookieSync),e),this.optionsService._options.includeTCFString&&this._tcfString&&vt({},un,this._tcfString)),this.getGDPRParams()),this.getBrandConsentParams())}},{key:"resolveConsent",value:function(){var e=this;(this.optionsService._options.includeTCFString&&this.gdprCMP.getConsentData((function(t){var n=new $o(t);e._tcfString=n.consentString})),this.optionsService.options.useConsent)?this.optionsService.options.checkForCMP?(this.logger.logInfo("resolveConsent","Resolve consent using a CMP."),this.gdprCMP.getConsentData((function(t){new $o(t).resolved&&e.setConsent(t)}))):(this.logger.logInfo("resolveConsent","Resolve consent via custom flow."),this.getConsentFromStorageAsHashedString()||(this.askForConsentDispatched=!0,this.eventTarget.dispatchEvent(new so(gn,null)))):this.optionsService.options.optOut?(this.logger.logInfo("resolveConsent","Setting no consent since optOut is set."),this.setConsent({track:!1,identify:!1,cookieSync:!1,vendorConsent:!1})):(this.logger.logInfo("resolveConsent","Setting consent to true for optOut=false case."),this.setConsent({track:!0,identify:!0,cookieSync:!0,vendorConsent:!0}))}},{key:"listenForAskForConsentAction",value:function(e){this.getConsentFromStorageAsHashedString()||(this.askForConsentDispatched?e():this.eventTarget.addEventListener(gn,e))}},{key:"removeAskForConsentActionListener",value:function(e){this.eventTarget.removeEventListener(gn,e)}}]),e}(),Ai=function(){function e(){St(this,e),this.buffer=[]}return mt(e,[{key:"length",value:function(){return this.buffer.length}},{key:"get",value:function(){return this.buffer}},{key:"getN",value:function(e){return Array.prototype.slice.call(this.buffer,0,e)}},{key:"pop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.buffer.splice.call(this.buffer,0,e)}},{key:"push",value:function(e){var t;(t=this.buffer).push.apply(t,mo(Gn(e)?e:[e]))}}]),e}(),Di=function(){function e(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ai,i=arguments.length>3?arguments[3]:void 0;St(this,e),this.config=t,this.q=o,this.dispatcher=n,this.logger=i,this.isdispatchScheduled=!1,this.isDispatchInProgress=!1}return mt(e,[{key:"scheduleEvent",value:function(e){this.logger.logInfo("scheduleEvent","Event scheduled: ",e),this.q.push(e)}},{key:"scheduleDispatch",value:function(){var e=this;this.logger.logInfo("scheduleDispatch","Scheduling dispatched events"),this.q.length()&&(this.q.length()>=this.config.eventUploadThreshold?this.dispatchEvents():this.isdispatchScheduled||(this.isdispatchScheduled=!0,setTimeout((function(){e.isdispatchScheduled=!1,e.dispatchEvents()}),this.config.eventUploadPeriodMillis)))}},{key:"dispatchEvents",value:function(){if(0!==this.q.length()&&!this.isDispatchInProgress){this.isDispatchInProgress=!0;var e=Math.min(this.config.uploadBatchSize,this.q.length()),t=this.q.getN(e);this.dispatcher(function(t){this.isDispatchInProgress=!1,this.q.pop(e),this.scheduleDispatch()}.bind(this),t)}}}]),e}(),Ti=function(){function e(){St(this,e),this.onIdentitiesChangeEventTarget=document,this.previousValue=null}return mt(e,[{key:"trigger",value:function(e){(!this.previousValue||It(this.previousValue)!==It(e))&&(this.previousValue=e,this.onIdentitiesChangeEventTarget.dispatchEvent(new CustomEvent("onIdentitiesChange",{detail:e})))}},{key:"listen",value:function(e){this.onIdentitiesChangeEventTarget.addEventListener("onIdentitiesChange",e)}},{key:"reset",value:function(){this.previousValue=null}},{key:"removeListener",value:function(e){this.onIdentitiesChangeEventTarget.removeEventListener("onIdentitiesChange",e)}}]),e}(),Fi={ignoreSuffix:!0,domain:null,encrypted:!1},ji=function(e){return"zpstorage_"+Jo.base64.encode(e)+"zi"},Ui=function(e){return"zpstorage_"+Jo.base64.encode(e)+"identity"},Li=function(e){return"zpstorage_"+Jo.base64.encode(e)+"zs"},Mi=function(){function e(t,n,o){St(this,e),this.optionsService=t,this.storageService=n,this.logger=o,this._zi=null,this._zs=null,this._identity={},this._gaClientId=null,this._gaUserId=null,this._identityEvents=new Ti}return mt(e,[{key:"getOrGenerateZI",value:function(){return"string"!==Jo.getType(this._zi)||Jo.isNullOrEmpty(this._zi)?Jo.getUUIDv4():(this.logger.logInfo("getOrGenerateZI","ZI cookie value: ",this._zi),this._zi)}},{key:"setZI",value:function(e){this.logger.logInfo("setZI","ZI cookie being set as: ",e),this._zi=e,this.saveZItoStorage()}},{key:"resetZI",value:function(){this._zi=Jo.getUUIDv4(),this.logger.logInfo("resetZI","ZI cookie being reset as: ",this._zi),this.saveZItoStorage()}},{key:"getOrGenerateZS",value:function(){return("string"!==Jo.getType(this._zs)||Jo.isNullOrEmpty(this._zs))&&(this._zs=Jo.getUUIDv4()),this._zs}},{key:"getGAClientIdFromStorage",value:function(){if(this.optionsService.options.allowGAClientId){var e=this.storageService.get(this.optionsService.options.gaClientIdCookiePrefix?this.optionsService.options.gaClientIdCookiePrefix+"_ga":"_ga",Fi);return e&&(e=e.split(".").splice(2).join(".")),this.logger.logInfo("getGAClientIdFromStorage","Google Analytics Client ID: ",e),e}return null}},{key:"setGAUserIdFromStorage",value:function(){var e;this.optionsService.options.gaUserIdCookieName&&(e=this.storageService.get(this.optionsService.options.gaUserIdCookieName,Fi),this.logger.logInfo("setGAUserIdFromStorage","Google Analytics User ID: ",e)),this._gaUserId=e}},{key:"resetZS",value:function(){this._zs=Jo.getUUIDv4(),this.logger.logInfo("resetZS","Setting ZS as: ",this._zs),this.saveZStoStorage()}},{key:"resetZsExpiry",value:function(){this.loadAndPersistZS(),this.getOrGenerateZS(),this.saveZStoStorage()}},{key:"loadZIfromStorage",value:function(){var e=this.storageService.get(ji(this.optionsService.options.apiKey));this._zi=Jo.isEmptyString(e)?null:e,this.saveZItoStorage()}},{key:"saveZItoStorage",value:function(){Jo.isEmptyString(this._zi)||(this.logger.logInfo("saveZItoStorage","Saving ZI to storage: ",this._zi),this.storageService.set(ji(this.optionsService.options.apiKey),this._zi,{expirationDays:365}),this._identityEvents.trigger(this.getAllIdentites()))}},{key:"getUserIdentitesFromStorage",value:function(){var e=this.storageService.getFromCookieOrSession(Ui(this.optionsService.options.apiKey),{isString:!1,hash:!1});this._identity=yt({},e),this.logger.logInfo("getUserIdentityFromStorage","User Identity: ",this._identity)}},{key:"saveUserIdentityToStorage",value:function(){var e=Ui(this.optionsService.options.apiKey);this.logger.logInfo("saveUserIdentityToStorage","Saving User Identity to sesion storage with name as: ",e);var t=this.storageService.get(e);t&&(this._identity=yt(yt({},this._identity),t),this.storageService.removeFromCookieOrSession(e)),this.storageService.setInCookieOrSession(e,this._identity,{hash:!1,isString:!1}),this._identityEvents.trigger(this.getAllIdentites())}},{key:"getZSFromStorage",value:function(){var e=this.storageService.getFromCookieOrSession(Li(this.optionsService.options.apiKey),{isString:!0});this._zs=Jo.isEmptyString(e)?Jo.getUUIDv4():e}},{key:"loadAndPersistZS",value:function(){this.getZSFromStorage(),this.saveZStoStorage()}},{key:"saveZStoStorage",value:function(){Jo.isEmptyString(this._zs)||(this.logger.logInfo("saveZStoStorage","Saving ZS to storage: ",this._zs),this.storageService.removeFromCookieOrSession(Li(this.optionsService.options.apiKey)),this.storageService.setInCookieOrSession(Li(this.optionsService.options.apiKey),this._zs,{isString:!0,hash:!1}),this._identityEvents.trigger(this.getAllIdentites()))}},{key:"getIdentity",value:function(){return this._identity}},{key:"setIdentity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._identity=yt(yt({},this._identity),e),this.logger.logInfo("setIdentity","Set identity as: ",this._identity),this.saveUserIdentityToStorage()}},{key:"unsetIdentity",value:function(){if(this.logger.logInfo("unsetIdentity","Unsetting identity"),0===arguments.length)return this._identity={},void this.saveUserIdentityToStorage();var e=arguments[0];return"array"===Jo.getType(e)?(this._identity=Jo.removePropertiesfromObject(this._identity,e),void this.saveUserIdentityToStorage()):void 0}},{key:"resolveAll",value:function(){this.logger.logInfo("resolveAll","Resolve all identifiers."),this._zi=this.getOrGenerateZI(),this._zs=this.getOrGenerateZS(),this._gaClientId=this.getGAClientIdFromStorage(),this.saveZItoStorage(),this.saveUserIdentityToStorage(),this.saveZStoStorage(),this.optionsService.options.gaUserIdOnlyLoginEvent||this.setGAUserIdFromStorage()}},{key:"resolveAndGetZI",value:function(){return this._zi=this.getOrGenerateZI(),this.saveZItoStorage(),this._zi}},{key:"resolveAndGetZS",value:function(){return this._zs=this.getOrGenerateZS(),this.saveZStoStorage(),this._zs}},{key:"resolveAndGetGAClientID",value:function(){return this._gaClientId=this.getGAClientIdFromStorage(),this._gaClientId}},{key:"resolveAndgetGAUserIdFromStorage",value:function(){return this.optionsService.options.gaUserIdOnlyLoginEvent||this.setGAUserIdFromStorage(),this._gaUserId}},{key:"clearAll",value:function(){this.logger.logInfo("clearAll","Clear all identifiers."),this._identity={},this._gaClientId=null,this._gaUserId=null,this.storageService.removeFromCookieOrSession(Ui(this.optionsService.options.apiKey))}},{key:"loadFromStorage",value:function(){this.loadZIfromStorage(),this.getUserIdentitesFromStorage(),this.getZSFromStorage(),this._gaClientId=this.getGAClientIdFromStorage(),this.optionsService.options.gaUserIdOnlyLoginEvent||this.setGAUserIdFromStorage()}},{key:"events",get:function(){return this._identityEvents}},{key:"getAllIdentites",value:function(){return yt({zi:this._zi},this._identity)}},{key:"stampAllUserIdentitiesInStorage",value:function(){this.resolveAndGetZI(),this.saveUserIdentityToStorage(),this.saveZStoStorage()}}]),e}(),Ri="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",zi="["+Ri+"]",Ni=RegExp("^"+zi+zi+"*"),Bi=RegExp(zi+zi+"*$"),Gi=function(e,t,n){var o={},i=c((function(){return!!Ri[e]()||"​"!="​"[e]()})),r=o[e]=i?t(Hi):Ri[e];n&&(o[n]=r),w(w.P+w.F*i,"String",o)},Hi=Gi.trim=function(e,t){return e=String(j(e)),1&t&&(e=e.replace(Ni,"")),2&t&&(e=e.replace(Bi,"")),e},Zi=Gi,qi=o.parseInt,Ki=Zi.trim,Vi=/^[-+]?0[xX]/,Qi=8!==qi(Ri+"08")||22!==qi(Ri+"0x16")?function(e,t){var n=Ki(String(e),3);return qi(n,t>>>0||(Vi.test(n)?16:10))}:qi;w(w.S+w.F*(Number.parseInt!=Qi),"Number",{parseInt:Qi});var Wi=i.Number.parseInt,Ji={ignoreSuffix:!0,domain:null},$i="em",Yi="ph",Xi="partnerId",er="dm",tr=function(){function e(t,n,o,i,r){St(this,e),this.optionsService=t,this.storageService=n,this.requestService=o,this.logger=i,this.eventTarget=r,this._idp=null,this._idpExpiry=null}return mt(e,[{key:"getIDP",value:function(){return this._idp}},{key:"isIDPEnabled",value:function(){return this.optionsService.options.allowIDP&&this.optionsService.options.partnerId}},{key:"loadIDPfromStorage",value:function(){try{var e=this.storageService.get("IDP",Ji),t=this.storageService.get("idp_expires",Ji);this._idp=Jo.isEmptyString(e)?null:e,this._idpExpiry=Jo.isEmptyString(t)?null:t,this.logger.logInfo("loadIDPfromStorage","Retrieved IDP and IDP Expiry from Storage: ",this._idp,this._idpExpiry),this.saveIDPtoStorage()}catch(e){this.logger.logError("loadIDPfromStorage","Retrieving IDP and IDP Expiry from Storage Failed!",e)}}},{key:"getIDPParams",value:function(e){var t=e.email,n=e.cellno_cc,o=e.cellno_with_country_code,i={};return"object"===Jo.getType(t)&&t.sha256_lowercase&&(i.email=t.sha256_lowercase),"object"===Jo.getType(n)&&n.sha256&&(i.cellno_cc=n.sha256),"object"===Jo.getType(o)&&o.sha256&&(i.cellno_cc=o.sha256),i}},{key:"fetchIDP",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"strict",o=this.getIDPParams(e),i=o.email,r=o.cellno_cc,s=this.optionsService.options,a=s.allowIDP,c=void 0===a||a,l=s.partnerId,u=void 0===l?null:l;c&&u&&(i||r)&&this.requestService.get(tn,yt(yt(yt(vt({},Xi,u),this.optionsService.options.partner_dom?vt({},er,this.optionsService.options.partner_dom):{}),i?vt({},$i,i):{}),r?vt({},Yi,r):{}),(function(e,o){if(200===e)try{var i=o?JSON.parse(o):{};if(i.idpCookie){t.logger.logInfo("fetchIDP","Fetch IDP responsed with value: ",i.idpCookie);var r=Wi(i.expiryTime);t._idp=i.idpCookie,t._idpExpiry=r,t.saveIDPtoStorage(n),t.eventTarget.dispatchEvent(new so("idp_fetched",{idp:i.idpCookie,idpExpiry:r}))}else t.clear(),t.eventTarget.dispatchEvent(new so("idp_fetched",{idp:null}))}catch(e){t.logger.logError("fetchIDP","Fetch IDP response was invalid",e),t.eventTarget.dispatchEvent(new so("idp_fetched",{idp:null,error:"IDP response was invalid"}))}else 204===e?(t.logger.logWarning("fetchIDP","Fetch IDP response was empty."),t.clear(),t.eventTarget.dispatchEvent(new so("idp_fetched",{idp:null}))):(t.logger.logError("fetchIDP","Fetch IDP failed."),t.eventTarget.dispatchEvent(new so("idp_fetched",{idp:null,error:"IDP fetch failed"})))}))}},{key:"saveIDPtoStorage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"strict";!Jo.isEmptyString(this._idp)&&this._idpExpiry&&(this.storageService.set("IDP",this._idp,yt(yt({},Ji),{},{expirationDateTime:this._idpExpiry,sameSite:e})),this.storageService.set("idp_expires",this._idpExpiry,yt(yt({},Ji),{},{expirationDateTime:this._idpExpiry,sameSite:e})))}},{key:"clear",value:function(){this.logger.logInfo("clear","Clear IDP and IDP expiry from Storage."),this._idp=null,this._idpExpiry=null,this.storageService.remove("IDP",Ji),this.storageService.remove("idp_expires",Ji)}},{key:"addIDPFetchListener",value:function(e){this.logger.logInfo("addIDPFetchListener","Attaching callback to fetch idp event."),this.eventTarget.addEventListener("idp_fetched",e)}},{key:"removeIDPFetchListener",value:function(e){this.logger.logInfo("removeIDPFetchListener","Removing fetch idp event listener."),this.eventTarget.removeEventListener("idp_fetched",e)}}]),e}(),nr=Bn(window,document),or=function(){function e(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new At;St(this,e),this.consentService=n,this.optionsService=t,this.requestService=o,this.insertInDom=function(e){var t=nr.getHolderDiv("zeo_mapping");nr.insertHTML(t,e)}}return mt(e,[{key:"sendEvents",value:function(e,t,n){if(this.consentService.hasConsent("track")){var o,i,r=nn;null!==(o=this.optionsService.options)&&void 0!==o&&o.pvtCloudEndpoint&&""!==(null===(i=this.optionsService.options)||void 0===i?void 0:i.pvtCloudEndpoint)&&(r="https://"+this.optionsService.options.pvtCloudEndpoint+"/fp");try{this.requestService.post(r,{params:this.consentService.getConsentQueryParams(),body:{events:n}},{basicAuthKey:btoa("w_k:"+this.optionsService.options.apiKey)},(function(n,o){n>=200&&n<300?e():t()}))}catch(e){t()}}}},{key:"cookieSync",value:function(){var e,t,n=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:nn;null!==(e=this.optionsService.options)&&void 0!==e&&e.pvtCloudEndpoint&&""!==(null===(t=this.optionsService.options)||void 0===t?void 0:t.pvtCloudEndpoint)&&(r="https://"+this.optionsService.options.pvtCloudEndpoint+"/fp");try{this.requestService.get(r,o,(function(e,t){e>=200&&e<300?(n.insertInDom(t),i(!0)):i(!1)}))}catch(e){i(!1)}}}]),e}();if("undefined"!=typeof navigator&&"ReactNative"===navigator.product&&"undefined"==typeof crypto)throw new Error("React Native does not have a built-in secure random generator. If you don’t need unpredictable IDs use `nanoid/non-secure`. For secure IDs, import `react-native-get-random-values` before Nano ID.");if("undefined"!=typeof msCrypto&&"undefined"==typeof crypto)throw new Error("Import file with `if (!window.crypto) window.crypto = window.msCrypto` before importing Nano ID to fix IE 11 support");if("undefined"==typeof crypto)throw new Error("Your browser does not have secure random generator. If you don’t need unpredictable IDs, you can use nanoid/non-secure.");let ir=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e));for(;e--;){let o=63&n[e];t+=o<36?o.toString(36):o<62?(o-26).toString(36).toUpperCase():o<63?"_":"-"}return t};var rr=function(){function e(t,n,o,i,r,s,a){var c=this;St(this,e),this.optionsService=t,this.storageService=n,this.consentService=o,this.identityService=i,this.idpService=r,this.spl=s,this.logger=a,this.pageProperties={},this.eventsScheduler=new Di({eventUploadPeriodMillis:1,eventUploadThreshold:1,uploadBatchSize:1},(function(e,t){c.spl.sendEvents((function(){e(!0)}),(function(){e(!1)}),t)}),void 0,a),this.isLoadedFromStorage=!1,this.consentService.listenToOnConsentSet((function(e){var t=e.data;if(null!=t&&t.resolved)if(c.consentService.hasConsent("identify")||c.idpService.clear(),c.consentService.hasConsent("track"))c.getId5(),c.resolveIdentifiers();else if(c.identityService._zi){var n=c.consentService.getConsentFromStorageAsHashedString()?jn:Fn;c.cookieSync(0,(function(e){e&&c.identityService.clearAll()}),n)}})),this.optionsService.listenToOptionsChange((function(e){c.optionsService.options.apiKey&&(c.identityService.loadFromStorage(),c.idpService.loadIDPfromStorage())}))}return mt(e,[{key:"captureSetIdentities",value:function(){var e,t,n,o,i=Jo.transformIdentitiesToUserProperties(this.identityService._identity),r=Jo.getCustomIdentities(this.identityService._identity),s=yt(yt(yt(yt(yt(yt(yt(yt(yt(yt({},this.identityService._zi?vt({},In,this.identityService._zi):(e=this.identityService.resolveAndGetZI())?vt({},In,e):{}),this.identityService._zs?vt({},wn,this.identityService._zs):(t=this.identityService.resolveAndGetZS())?vt({},wn,t):{}),this.optionsService.options.allowGAClientId&&this.identityService._gaClientId?vt({},En,this.identityService._gaClientId):(n=this.identityService.resolveAndGetGAClientID())?vt({},En,n):{}),this.identityService._gaUserId?vt({},Pn,this.identityService._gaUserId):(o=this.identityService.resolveAndgetGAUserIdFromStorage())?vt({},Pn,o):{}),i.cellno_with_country_code?vt({},kn,i.cellno_with_country_code):{}),i.cellno_without_country_code?vt({},bn,i.cellno_without_country_code):{}),i.email?vt({},Cn,i.email):{}),i.loginid?vt({},An,i.loginid):{}),i.fpuid?vt({},On,i.fpuid):{}),i.cellno_e164?vt({},xn,i.cellno_e164):{});return te(s).length>0&&this.logger.logInfo("captureSetIdentities","Capturing user PIIs: ",s),te(r).length>0&&this.logger.logInfo("captureSetIdentities","Capturing user Custom Identities: ",r),yt(yt({},s),r)}},{key:"_getQueryParams",value:function(){return yt(yt(yt(yt({},this.consentService.getConsentQueryParams()),this.optionsService.options.user_country?{user_country:this.optionsService.options.user_country}:{}),this.idpService._idp?vt({},_n,this.idpService._idp):{}),{},{w_k:Jo.base64.encode(this.optionsService.options.apiKey),payload:Jo.base64.encode(It(this.captureSetIdentities()))})}},{key:"_clearUserData",value:function(){this.idpService.clear(),this.identityService.clearAll()}},{key:"resolveIdentifiers",value:function(){this.consentService.hasConsent("track")&&this.identityService.resolveAll();var e=this.consentService.getConsentFromStorageAsHashedString()?jn:Fn;this.cookieSync(0,void 0,e)}},{key:"cookieSync",value:function(e,t,n){if(n!=Dn&&n!=Tn){var o=this._getQueryParams(),i=this.storageService.get(xi(this.optionsService.options.apiKey),null,!0);i&&en()-i<864e5&&"cookieSync"in o?o.cookieSync=!1:this.storageService.set(xi(this.optionsService.options.apiKey),en(),null,!0);var r=this.consentService.getConsent();if(this.optionsService.options.useConsent&&this.optionsService.options.checkForCMP&&(null==r||!r.gdprApplies||null==r||!r.consentString))return;if(e&&(null==r||!r.track)&&(null==r||!r.cookieSync)&&(null==r||!r.identify))return;this.spl.cookieSync(yt(yt(yt({},e?{zsc_ovrd:e}:{}),o),!!n&&{event_eventName:n}),t)}}},{key:"_getPageProperty",value:function(){var e=Jo.getLocation(),t=this.pageProperties[e.pathname]?this.pageProperties[e.pathname]:{};return yt({path:e.pathname,referrer:Jo.getReferrer(),url:e.href},t)}},{key:"logEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(this.consentService.hasConsent("track"))if(e.trim().length){var r=Jo.validateProperties(t),s={event:yt(yt(yt({},r.id?{id:r.id}:{id:ir()}),{},{eventName:e},r),{},{eventTimestamp:Jo.getTimeStamp()}),user:yt(yt(yt(yt(yt(yt(yt(yt(yt(yt({},o),this.identityService._zs?{zs:this.identityService._zs}:{}),this.identityService._zi?{zi:this.identityService._zi}:{}),this.identityService._zi?{zi_domain:this.optionsService.options.domain?this.optionsService.options.domain:this.storageService.tld}:{}),this.idpService._idp?{idp:this.idpService._idp}:{}),this.idpService._idp&&this.storageService.tld?{idp_domain:this.storageService.tld}:{}),this.optionsService.options.allowGAClientId&&this.identityService._gaClientId?vt({},"ga_client_id",this.identityService._gaClientId):{}),this.identityService._gaUserId?vt({},"ga_user_id",this.identityService._gaUserId):{}),Jo.transformIdentitiesToUserProperties(this.identityService._identity)),this.optionsService.options.user_country?{country:this.optionsService.options.user_country}:{}),page:yt(yt({},this._getPageProperty()),i),meta:n,version:"4.4.4"};this.identityService.loadAndPersistZS(),this.eventsScheduler.scheduleEvent(s),this.eventsScheduler.scheduleDispatch()}else this.logger.logWarning("logEvent","Event dropped as eventName passed is empty");else this.logger.logInfo("logEvent","Event cannot be added due to lack of consent to track: ",e)}},{key:"setPageProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Jo.getLocation().pathname,n=Jo.validateProperties(e);Jo.isEmptyString(t)||(this.pageProperties[t]=n),this.logEvent(sn,{},{},{},n)}},{key:"setUserProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=yt(yt({},e),Jo.hashIdentities(e));this.logEvent(rn,{},{},t)}},{key:"setMeta",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logEvent(an,{},Jo.validateProperties(e))}},{key:"transformIdentitiesBasedOnConfiguration",value:function(e,t){return this.logger.logInfo("transformIdentitiesBasedOnConfiguration","Transforming identities based on Configuration: ",e),void 0===this.optionsService.options.areIdentitiesHashed?t?Jo.validateHashedIdentities(e):Jo.hashIdentities(Jo.validateRawIdentities(e,!0)):!1===this.optionsService.options.areIdentitiesHashed?this.optionsService.options.hashIdentities?Jo.hashIdentities(Jo.validateRawIdentities(e,!0)):Jo.validateRawIdentities(e):Jo.validateHashedIdentities(e)}},{key:"areIdentitiesValidToFetchIDP",value:function(e){var t,n,o,i;return(!1!==this.optionsService.options.areIdentitiesHashed||!1!==this.optionsService.options.hashIdentities)&&!!(null!=e&&null!==(t=e.email)&&void 0!==t&&t.sha256_lowercase||null!=e&&null!==(n=e.email)&&void 0!==n&&n.sha256_uppercase||null!=e&&null!==(o=e.cellno_with_country_code)&&void 0!==o&&o.sha256||null!=e&&null!==(i=e.cellno_cc)&&void 0!==i&&i.sha256)}},{key:"setUserIdentities",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,o=this.identityService.getIdentity(),i=this.transformIdentitiesBasedOnConfiguration(t,n),r=this.optionsService.options.areIdentitiesHashed||this.optionsService.options.hashIdentities||n,s=Jo.getIdentitesSPLEventName(o,i,r);if(s&&(this.optionsService.options.gaUserIdOnlyLoginEvent&&this.identityService.setGAUserIdFromStorage(),this.consentService.hasConsent("track")&&(this.identityService.setIdentity(i),this.getId5()),this.idpService.isIDPEnabled()&&this.consentService.hasConsent("identify")&&this.areIdentitiesValidToFetchIDP(i))){var a=function t(n){n.data;e.idpService.removeIDPFetchListener(t)};this.idpService.addIDPFetchListener(a),this.idpService.fetchIDP(i)}}},{key:"unsetUserIdentities",value:function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];(e=this.identityService).unsetIdentity.apply(e,n),null!=n&&n.length&&!n.find((function(e){return"IDP"===e}))||this.idpService.clear()}},{key:"setZI",value:function(e){this.consentService.hasConsent("track")&&this.identityService.setZI(e)}},{key:"resetZI",value:function(){this.consentService.hasConsent("track")&&this.identityService.resetZI()}},{key:"getID5PartnerDataString",value:function(){var e=this.identityService.getIdentity(),t=vt({},Un,encodeURIComponent(navigator.userAgent));e.email&&"string"==typeof e.email?t[Ln]=Jo.hash256(Jo.sanitizeEmail(e.email.trim().toLowerCase())):e.email&&"object"===Xt(e.email)&&e.email.sha256_lowercase&&(t[Ln]=e.email.sha256_lowercase),e.cellno_cc&&"string"==typeof e.cellno_cc?t[Mn]=Jo.hash256("+"+e.cellno_cc.replace(/\s+/g,"")):e.cellno_e164&&"object"===Xt(e.cellno_e164)&&e.cellno_e164.sha256&&(t[Mn]=e.cellno_e164.sha256);var n=te(t).map((function(e){return e+"="+t[e]})).join("&");return btoa(n)}},{key:"getId5Configurations",value:function(){var e={maxCascades:-1,partnerId:this.optionsService.options.id5PartnerId,cmpApi:"static"};if(this.optionsService.options.useConsent&&this.optionsService.options.checkForCMP){var t=this.consentService.getGDPRParams();e.consentData={getTCData:{gdprApplies:!0,tcString:t[un]}}}else e.consentData={allowedVendors:["301","131"]};return this.optionsService.options.sendPartnerDataToID5&&(e.pd=this.getID5PartnerDataString()),e}},{key:"getId5",value:function(){var e=this;if(this.optionsService.options.enableID5&&this.optionsService.options.id5PartnerId&&window.ID5)window.ID5.init(this.getId5Configurations()).onAvailable((function(t){var n=t.getUserId();n&&e.identityService.setIdentity({ID5:n})}))}}]),e}();w(w.G+w.F*(parseInt!=Qi),{parseInt:Qi});var sr=i.parseInt,ar={expirationDays:void 0,domain:void 0,ignoreSuffix:!1};var cr,lr,ur,pr,dr,hr=function(e,t){var n=function(){this._options=yt({},ar)},o=function(e){return{getCookie:function(t){try{for(var n=e.cookie.split(";"),o=null,i=0;i<n.length;i++){for(var r=n[i];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t)){o=r.substring(t.length,r.length);break}}return o}catch(e){return null}},setCookie:function(t,n,o){var i=null!==n?o.expirationDateTime:-1;if(i){var r=new Date;r.setTime(i),i=r}var s=t+"="+n;i&&(s+="; expires="+i.toUTCString()),s+="; path=/",o.domain&&(s+="; domain="+o.domain),o.secure&&(s+="; Secure"),s+="; samesite=".concat(o.sameSite),e.cookie=s}}}(t),i=function(){return e.location};n.prototype.reset=function(){this._options=yt({},ar)};var r=function(e){var n=function(e){var n=t.createElement("a");return n.href=e,n.hostname||i().hostname}(e).split("."),r=n[n.length-1],s=[];if(4===n.length&&r===sr(r,10))return s;if(n.length<=1)return s;for(var a=n.length-2;a>=0;--a)s.push(n.slice(a).join("."));for(var c=0;c<s.length;++c){var l="__tld_test__",u=s[c],p={domain:"."+u};if(o.setCookie(l,1,p),o.getCookie(l))return o.setCookie(l,null,p),u}return""};n.prototype.getTld=function(){return"."+r(i().href)},n.prototype.getValidDomain=function(e){var t=Jo.isEmptyString(e.domain)?this.getTld():e.domain;e.domain=t;var n=Math.random();this.set("ztestc",n,e);var o=this.get("ztestc",e);return o&&o===n||(t=null),this.remove("ztestc",e),t},n.prototype.options=function(e){return 0===arguments.length||(e=e||{},this._options.expirationDays=e.expirationDays,this._options.secure=e.secure,this._options.ignoreSuffix=!!e.ignoreSuffix&&e.ignoreSuffix,this._options.domain=e.domain,this._options.domain=this.getValidDomain(this._options)),this._options};var s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ar,n="";return!t.ignoreSuffix&&t.domain&&(n="."===t.domain.charAt(0)?t.domain.substring(1):t.domain),e+n};return n.prototype.get=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=yt(yt({},this._options),t),i=o.getCookie(s(e,n)+"=");try{if(i)return!1!==t.encrypted?JSON.parse(Jo.base64.decode(i)):i}catch(e){return null}return null},n.prototype.set=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=yt(yt({},this._options),n);i.expirationDateTime=i.expirationDateTime?i.expirationDateTime:i.expirationDays?(new Date).getTime()+24*i.expirationDays*60*60*1e3:void 0;try{return o.setCookie(s(e,i),Jo.base64.encode(It(t)),i),!0}catch(e){return!1}},n.prototype.remove=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=yt(yt({},this._options),t);try{return o.setCookie(s(e,n),null,n),!0}catch(e){return!1}},n}(window,document),fr=(cr=window,ur=(lr=cr).localStorage?lr.localStorage:{length:0,setItem:function(e,t){},getItem:function(e){},removeItem:function(e){},clear:function(){},key:function(e){}},pr="base64",dr=function(){return"base64"===pr},{setEncoding:function(e){pr=e},options:function(e){return e},get:function(e){try{var t=ur.getItem(e);return t?dr()?JSON.parse(Jo.base64.decode(t)):JSON.parse(t):null}catch(t){console.error("Error occured in getting from local storage",e,t)}return null},set:function(e,t){try{return dr()?ur.setItem(e,Jo.base64.encode(It(t))):ur.setItem(e,It(t)),!0}catch(n){console.error("Error occured in setting to local storage",e,t,n)}return!1},remove:function(e){try{ur.removeItem(e)}catch(e){return!1}}});var gr=n((function(e){e.exports=function(e,t){if(null==e)return{};var n,o,i={},r=te(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(i[n]=e[n]);return i},e.exports.default=e.exports,e.exports.__esModule=!0}));t(gr);var vr=t(n((function(e){e.exports=function(e,t){if(null==e)return{};var n,o,i=gr(e,t);if(rt){var r=rt(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i},e.exports.default=e.exports,e.exports.__esModule=!0}))),yr=Object.assign,Sr=!yr||c((function(){var e={},t={},n=Symbol(),o="abcdefghijklmnopqrst";return e[n]=7,o.split("").forEach((function(e){t[e]=e})),7!=yr({},e)[n]||Object.keys(yr({},t)).join("")!=o}))?function(e,t){for(var n=U(e),o=arguments.length,i=1,r=ue.f,s=pe.f;o>i;)for(var a,c=R(arguments[i++]),u=r?ee(c).concat(r(c)):ee(c),p=u.length,d=0;p>d;)a=u[d++],l&&!s.call(c,a)||(n[a]=c[a]);return n}:yr;w(w.S+w.F,"Object",{assign:Sr});var mr=i.Object.assign,_r=t(n((function(e){e.exports=function(e){return co(e)||vo(e)||io(e)||ho()},e.exports.default=e.exports,e.exports.__esModule=!0})));function Ir(e,t,n,o){if(e._q.length<t)e._q.push([n].concat(o));else if(e._q.length===t){var i=_r(e._q),r=(i[0],i.slice(1));e._q=[].concat(mo(r),[[n].concat(o)])}}function wr(e){var t,n;return e.instance&&(null===(t=e.consentService)||void 0===t||null===(n=t.consent)||void 0===n?void 0:n.resolved)}var Cr={queueIfNotReady:Ir,isReady:wr},br=function(e){return function t(n){this._q=[],this._qcmp=[];var o=n;o.optionsService.listenToOptionsChange((function(){o&&o.logger&&o.optionsService&&o.optionsService.options&&o.logger.updateLogger(o.optionsService.options.enableLogging,o.optionsService.options.logLevel)})),t.prototype.getConfig=function(){return yt({},n.optionsService.options)},t.prototype.runQueuedFunctions=function(){if(!o.isRunningQ){o.isRunningQ=!0;for(var e=0;e<this._q.length;e++){var t=this._q[e]||[],n=t&&t.length>0&&t[0]?this[t[0]]:function(){};if("function"==typeof n)n.apply(this,t.slice(1))}this._q=[],o.isRunningQ=!1}},t.prototype.runCMPQueuedFunctions=function(){for(var e=0;e<this._qcmp.length;e++){var t=this._qcmp[e]||[],n=t&&t.length>0&&t[0]?this[t[0]]:function(){};if("function"==typeof n)n.apply(this,t.slice(1))}this._qcmp=[]},t.prototype.init=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!==e){o.optionsService.setOptions(yt(yt({},n),{},{apiKey:e})),o.logger.logInfo("init","Collect SDK configured with the following options: ",o.optionsService.options),this.initInteractSDK();var i=function e(n){var i=n.data;i.resolved&&(i.track&&o.identityService.stampAllUserIdentitiesInStorage(),t.runQueuedFunctions(),o.consentService.removeOnConsentResolveListener(e))};o.consentService.listenToOnConsentResolve(i),o.consentService.resolveConsent(),this.runCMPQueuedFunctions()}else o.logger.logError("init","Write Key missing")},t.prototype.callMethod=function(){var e=arguments,t=e&&e.length>0&&e[0]?this[e[0]]:function(){};if("function"==typeof t){var n=t;n.apply(this,Array.prototype.slice.call(e,1))}},t.prototype.setEventProperties=function(e){for(var t,n,i=arguments.length,r=new Array(i>1?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];if(Cr.isReady(o)){var a=mr.apply(Object,[{}].concat(r));null!==(t=o.consentService)&&void 0!==t&&null!==(n=t.consent)&&void 0!==n&&n.track&&o.logger.logInfo("setEventProperties","Setting Event properties as: ",a),o.instance.logEvent(e,a)}else Cr.queueIfNotReady(this,o.optionsService.options.maxEventsQueuedTillConsentUnresolved,"setEventProperties",Array.prototype.slice.call(arguments,0))},t.prototype.setPageProperties=function(){for(var e,t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];if(Cr.isReady(o)){var s=mr.apply(Object,[{}].concat(i));null!==(e=o.consentService)&&void 0!==e&&null!==(t=e.consent)&&void 0!==t&&t.track&&o.logger.logInfo("setPageProperties","Setting Page properties as: ",s),o.instance.setPageProperties(s)}else Cr.queueIfNotReady(this,o.optionsService.options.maxEventsQueuedTillConsentUnresolved,"setPageProperties",Array.prototype.slice.call(arguments,0))},t.prototype.setUserProperties=function(){for(var e,t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];Cr.isReady(o)?((e=o.logger).logInfo.apply(e,["setUserProperties","Setting User properties as: "].concat(i)),(t=o.instance).setUserProperties.apply(t,i)):Cr.queueIfNotReady(this,o.optionsService.options.maxEventsQueuedTillConsentUnresolved,"setUserProperties",Array.prototype.slice.call(arguments,0))},t.prototype.setMetaProperties=function(e){Cr.isReady(o)?(o.logger.logInfo("setMetaProperties","Setting Meta properties as: ",e),o.instance.setMeta(e)):Cr.queueIfNotReady(this,o.optionsService.options.maxEventsQueuedTillConsentUnresolved,"setMetaProperties",Array.prototype.slice.call(arguments,0))},t.prototype.setUserIdentities=function(){for(var e,t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];Cr.isReady(o)?(null==o||null===(e=o.logger)||void 0===e||e.logInfo.apply(e,["setUserIdentities","Setting User Identities as: "].concat(i)),(t=o.instance).setUserIdentities.apply(t,i)):Cr.queueIfNotReady(this,o.optionsService.options.maxEventsQueuedTillConsentUnresolved,"setUserIdentities",Array.prototype.slice.call(arguments,0))},t.prototype.unsetUserIdentities=function(){var e,t;null==o||null===(e=o.logger)||void 0===e||e.logInfo("unsetUserIdentities","Unsetting User Identities"),(t=o.instance).unsetUserIdentities.apply(t,arguments)},t.prototype.unsetUserIdentites=function(){var e;console.warn("Method deprecated: unsetUserIdentites, use unsetUserIdentities instead."),(e=o.instance).unsetUserIdentities.apply(e,arguments)},t.prototype.getZI=function(){return o.identityService._zi},t.prototype.getAllIdentites=function(){return o.identityService.getAllIdentites()},t.prototype.getWriteKey=function(){return o.optionsService.options.apiKey},t.prototype.resetZI=function(){o.instance.resetZI()},t.prototype.setZI=function(e){o.instance.setZI(e)},t.prototype.getIDP=function(){return o.idpService.getIDP()},t.prototype.setConsent=function(e){var t,n,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:90,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a="number"==typeof r?r:90,c={},l={},u=!!o.optionsService.options.useConsent&&!o.optionsService.options.checkForCMP;u&&("object"===Xt(e)?c={track:null!==(t=e[Rn])&&void 0!==t&&t,identify:null!==(n=e[zn])&&void 0!==n&&n,cookieSync:null!==(i=e[Nn])&&void 0!==i&&i}:"boolean"==typeof e?c={track:e,identify:e,cookieSync:e,vendorConsent:e}:o.logger.logError("setConsent","SDK Consent Type Mismatch, expecting Object or boolean. Passed value : ",e));if("object"===Xt(s)?l=s:"string"==typeof s&&(l=s.split(",").reduce((function(e,t){return yt(yt({},e),{},vt({},t,!0))}),{})),e){e.track,e.cookieSync,e.identify;var p=vr(e,["track","cookieSync","identify"]);l=yt(yt({},l),p)}var d={consent:c,consentForBrandPurposes:l,expiry:a};o.logger.logInfo("setConsent","Dispatching Consent Set Event with value => ",d),(u||!u&&te(d.consentForBrandPurposes).length>0)&&o.eventTarget.dispatchEvent(new so(vn,d))},t.prototype.getConsentData=function(){o.consentService.getConsent()},t.prototype.addAskForConsentActionListener=function(e){o.consentService.listenForAskForConsentAction&&o.consentService.listenForAskForConsentAction(e)},t.prototype.removeAskForConsentActionListener=function(e){o.consentService.removeAskForConsentActionListener(e)},t.prototype.setLogger=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"debug";o.logger.setLoggerStatus(e,t)},t.prototype.initInteractSDK=function(){var t=this;if(o.optionsService.options.loadInteractScript){o.logger.logInfo("initInteractSDK","Interact SDK loading is enabled in the configuration.");var n=document.createElement("script");n.src=o.optionsService.options.interactScriptUrl||"https://content.zeotap.com/qa/sdk/interact.min.js",n.async=!0,n.onload=function(){e.zeotapInteract?(e.zeotapInteract.init(t.getWriteKey()),o.logger.logInfo("init","Interact SDK initialized.")):o.logger.logError("init","Failed to initialize Interact SDK.")},n.onerror=function(){o.logger.logError("initInteractSDK","Failed to load the Interact SDK script.")},document.head.appendChild(n)}else o.logger.logInfo("initInteractSDK","Interact SDK loading is disabled in the configuration.")}}}(window);function kr(e,t,n,o){var i=e[n]||{},r=t;if(r._q=i._q||[],r._qcmp=i._qcmp||[],r.scriptLoaded=!0,r._q.length&&r._q[0].length){var s=r._q[0][0],a=r._q[0][1];if("init"===s){var c=r._q.shift();r.init(c[1],c[2])}else if("callMethod"===s&&"init"===a){var l=r._q.shift();r.callMethod("init",l[2],l[3])}}b(e,n,{value:T(r),writable:o}),e.dispatchEvent(new CustomEvent("zeotapLoaded"))}var xr=new ao,Or=new Yo(xr),Er=new ei(F),Pr=new ti(Or,new hr,fr),Ar=new Pi(Or,Pr,Er,xr),Dr=new Mi(Or,Pr,Er),Tr=new tr(Or,Pr,new At,Er,xr),Fr=new rr(Or,Pr,Ar,Dr,Tr,new or(Or,Ar),Er);return kr(window,new br(new function(e,t,n,o,i,r,s){var a=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];return{instance:e,optionsService:n,consentService:o,identityService:i,idpService:r,logger:s,eventTarget:t,isRunningQ:a,askForConsent:c}}(Fr,xr,Or,Ar,Dr,Tr,Er)),"zeotap",!1),kr}();
